"use strict";(()=>{var wn=Object.defineProperty;var r=(Z,H)=>wn(Z,"name",{value:H,configurable:!0});(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[5998],{21230:(Z,H,d)=>{var f=d(11427),E=d(10555);(0,f.on)("click",".js-conversation-menu-button",function(){let t=!0;return async function(e){if(t===!1){const o=e.currentTarget.closest(".select-menu").querySelector("details-menu");if(!o)return;o.innerHTML="";const i=`${o.getAttribute("src")}?instrument=1`,c=await fetch(i);c.ok&&(o.innerHTML=await c.text())}t=!1}}()),(0,f.on)("click",".js-conversations-menu-item",function(t){const e=t.currentTarget,n=e.closest(".js-conversations-details");n.hasAttribute("open")&&n.removeAttribute("open"),window.location.hash=e.hash,(0,E.kc)(document)}),(0,f.on)("click",".js-resolved-conversations",async function(t){const e=t.currentTarget.querySelector(".dropdown-caret"),n=t.currentTarget.querySelector(".select-menu-header");A(e),n.classList.toggle("border-bottom-0")});function A(t){t.style.transform===""?t.style.transform="rotate(180deg)":t.style.transform=""}r(A,"flipCaret");var O=d(27157),j=d(47789),l=d(30762),S=d(97424);(0,f.on)("details:toggled-group",".js-file.js-details-container",function(t){t.target===t.currentTarget&&a(t.detail.open)}),(0,f.on)("details:toggled",".js-file.js-details-container",function(t){if(t.target!==t.currentTarget)return;const e=t.currentTarget;e.getBoundingClientRect().top<0&&(0,E.zT)(e)}),(0,j.Z)(()=>{const t=window.location.hash.slice(1);if(!t)return;const e=document.getElementsByName(t)[0];if(!e)return;const n=e.nextElementSibling;n&&n.matches(".js-file.js-details-container")&&(n.classList.add("open"),n.classList.add("Details--on"))}),(0,l.N7)(".js-file-header-dropdown",{subscribe:t=>(0,O.RB)(t,"toggle",y)});function y({currentTarget:t}){const e=t,n=e.hasAttribute("open");e.closest(".js-file-header").classList.toggle("has-open-dropdown",n)}r(y,"toggleFileHeaderMenu");function a(t){if(!document.querySelector(".js-file-filter"))return;const n=m();for(const i of n)i.checked=t;const s=L();s&&(s.checked=!t);const o=x();$(o),I(o),ne(),ee(),se(),(0,S.X)(o,_(),u(),M(),b(),q(),B(),w())}r(a,"toggledAllFileContents");function u(){return Array.from(m()).filter(e=>e.checked).map(e=>e.value)}r(u,"getSelectedFileTypes");function m(){return document.querySelectorAll(".js-diff-file-type-option")}r(m,"getFileTypeOptions");function L(){const t=document.querySelector(".js-deleted-files-toggle");if(t instanceof HTMLInputElement)return t}r(L,"getDeletedFilesInput");function x(){return R()||B()||w()||M()||q()}r(x,"fileFilterActive");function M(){return b().length>0}r(M,"codeownerFilterActive");function b(){const t=document.querySelectorAll(".js-diff-owner-option");return Array.from(t).filter(n=>n.checked).map(n=>n.value)}r(b,"getSelectedOwners");function R(){return u().length!==m().length}r(R,"fileTypeFilterActive");function q(){const t=document.querySelector(".js-manifests-option");return t?t.checked:!1}r(q,"manifestFilterActive");function B(){const t=L();return t?!t.checked:!1}r(B,"deletedFilterActive");function w(){const t=document.querySelector(".js-viewed-files-toggle");return t?!t.checked:!1}r(w,"viewedFilterActive");function _(){return new URLSearchParams(window.location.search).has("w")}r(_,"whitespaceFilterActive");function $(t){document.querySelector(".js-file-filter-text").classList.toggle("color-fg-accent",t)}r($,"toggleHighlightActiveFilter");function I(t){const e=document.querySelector(".js-reset-filters"),n=document.querySelector(".js-commits-filtered");e!=null&&!n&&(e.hidden=!t)}r(I,"toggleResetFileFiltersButton");function ee(){const t=R(),e=document.querySelector(".js-file-filter-select-all-container"),n=t?"data-select-all-markup":"data-all-selected-markup",s=e.getAttribute(n);e.textContent=s,e.classList.toggle("color-fg-muted",!t),e.classList.toggle("color-fg-accent",t)}r(ee,"toggleSelectAll");function ne(){const t=m(),e=B();for(const n of t)if(e){const s=n.getAttribute("data-non-deleted-files-count")==="0";n.disabled=s}else n.disabled=!1}r(ne,"toggleAvailableOptions");function se(){const t=document.querySelectorAll(".js-file-type-count");for(const e of t){const n=B()?"data-non-deleted-file-count-markup":"data-all-file-count-markup",s=e.getAttribute(n);s&&(e.textContent=s)}}r(se,"toggleFileTypeCounts");function le(){const t=document.querySelector(".js-file-filter-blankslate");if(!t)return;if(document.querySelectorAll(".js-diff-progressive-loader").length>0){t.hidden=!0;return}const n=document.querySelectorAll(".js-file");if(n.length===0){t.hidden=!0;return}const s=Array.from(n).some(o=>!o.hidden);t.hidden=s}r(le,"checkEmptyFilterResults"),(0,f.on)("click",".js-jump-to-menu-item",function({currentTarget:t}){const e=t.getAttribute("href").substring(1),n=document.querySelector(`[data-anchor="${e}"]`);if(n){const s=n.closest(".js-file.js-details-container");s.hidden=!1}le()});var v=d(13717),k=d(23343),W=d(89390),te=d(65889),h=d(16393),p=d(75914),T=d(66789);const F="```suggestion",Q="```",z=new RegExp(`${F}(?:.*)
`,"i"),X=new RegExp(`${Q}(
|$)`);function K(t,e){const n=t.slice(0,e).split(`
`);return t.split(`
`)[n.length-1]}r(K,"lineAtIndex");function G(t){const n=/^(\s+)/.exec(t);return n&&n[0]||""}r(G,"leadingWhitespace");function ce(t){let e=`${F}
`;return e+=`${t}
`,e+=Q,e}r(ce,"formatSuggestion");function ue(t,e,n=0){const s=e.substring(n,e.length),o=t.exec(s);return o?o.index+n:-1}r(ue,"findNextOccurrenceOf");function Le(t,e){const n=[];let s=0,o=-1;for(;(o=ue(z,t,s))>-1;){s=o+F.length;const i=ue(X,t,s);if(i===-1)return!1;s=i+Q.length,n.push([o,i])}return n.some(i=>e>i[0]&&e<i[1])}r(Le,"cursorInSuggestionBlock");function jt(t){const e=t.selectionStart;if(!Le(t.value,e))return!1;const n=t.value,s=K(n,e);if(s===null)return!1;const i=`
${G(s)}`,c=n.substr(0,e)+i+n.substr(e);(0,te.Se)(t,c);const g=e+i.length;return t.setSelectionRange(g,g),!0}r(jt,"insertNewSuggestionLine");function Lt(t,e){const n=ce(t),s=e.selectionStart,o=e.value,i=ue(/\n/,o,s),c=o.trim()==="",g=K(o,s),P=g.trim()==="",D=`
${Q}`.length;let C=o,N=0;if(c)C=n,N=C.length-D;else if(i===-1)P?(C=o+n,N=C.length-D):(C=[o,n].join(`
`),N=C.length-D);else if(P){const U=G(g),Y=s-U.length,J=o.substring(0,Y),oe=o.substring(i,o.length);C=[J,n,oe].join(""),N=C.length-oe.length-D}else if(Le(o,s)){const U=ue(/```/,o,s)+3,Y=o.substring(0,U),J=o.substring(U,o.length);C=[Y,`
`,n,J].join(""),N=C.length-J.length-D}else{const U=o.substring(0,i),Y=o.substring(i,o.length);C=[U,`
`,n,Y].join(""),N=C.length-Y.length-D}(0,te.Se)(e,C),e.focus(),e.setSelectionRange(N,N)}r(Lt,"insertSuggestionBlock");var De=d(66123);const ie={addToBatchEnabled:".js-add-to-batch-enabled",unchangedSuggestion:".js-unchanged-suggestion",closedOrMergedPull:".js-closed-pull",viewingSubset:".js-viewing-subset-changes",leftBlob:".js-validation-on-left-blob",rightBlob:".js-validation-on-right-blob",outdatedComment:".js-outdated-comment",resolvedThread:".js-resolved-thread",pendingReview:".js-pending-review",isMultiLine:".js-is-multiline",inMergeQueue:".js-in-merge-queue"};function wt(t){const e=t.getAttribute("data-lines");if(e!=null){const s=t.closest(".js-suggested-changes-container").querySelector(".js-comment-field");Lt(e,s)}}r(wt,"renderSuggestionBlock");function Re(t,e){const n=document.querySelectorAll(".js-apply-suggestion-button"),s=t.querySelector(".js-disabled-apply-suggestion-button");for(const o of n){const i=s.cloneNode(!0);me(i,e),o.closest("details").replaceWith(i)}}r(Re,"disableAllApplySuggestionButtons");function Be(t){const e=document.querySelector(".js-batched-suggested-changes-container");e&&e.classList.add("d-none");for(const n of document.querySelectorAll(".js-apply-single-suggestion"))n.classList.remove("d-none"),n.disabled=!0,n.setAttribute("aria-label",t);for(const n of document.querySelectorAll(".js-batched-suggested-changes-add"))n.classList.remove("d-none"),n.disabled=!0,n.setAttribute("aria-label",t);for(const n of document.querySelectorAll(".js-batched-suggested-changes-remove"))n.classList.add("d-none");for(const n of document.querySelectorAll(".js-focus-commit-suggestions-form-button"))n.classList.add("d-none");for(const n of document.querySelectorAll(".js-pending-batched-suggestion-label"))n.classList.add("d-none")}r(Be,"disableBatchSuggestionsButtons");function me(t,e){t.setAttribute("aria-label",e),t.classList.remove("d-none")}r(me,"displayButton");function xe(t,e){const n=document.querySelector(".js-suggested-changes-inline-validation-template").cloneNode(!0);n.classList.remove("js-suggested-changes-inline-validation-template");const s=n.querySelector(".js-suggested-changes-inline-error-message");s.textContent=t.trim(),e.parentNode.insertBefore(n,e.nextSibling)}r(xe,"validateOnPreview"),(0,f.on)("click",".js-suggested-change-toolbar-item",function(t){const e=t.currentTarget;e instanceof HTMLButtonElement&&e.getAttribute("aria-disabled")==="false"&&wt(e)}),(0,f.on)("click",".js-refresh-after-suggestion",function(){window.location.reload()});function Fe(t){if(!document.querySelector(".js-suggested-changes-subset-files"))return;const n=t.querySelectorAll(".js-suggested-change-toolbar-item"),s=ie.viewingSubset;if(!s)return;const o=document.querySelector(s).textContent.trim();for(const i of n){i.setAttribute("aria-disabled","true");const c=i.getAttribute("aria-describedby"),g=document.getElementById(c);g.textContent=o}}r(Fe,"validateInlineCommmentsContainer"),(0,l.N7)(".js-inline-comments-container",{add(t){Fe(t)}}),(0,l.N7)(".js-preview-body .js-apply-changes",{add(t){const e=t.closest(".js-suggested-changes-container");if(!e)return t.remove();const n=document.querySelector(ie.rightBlob).textContent,s=document.querySelector(ie.leftBlob).textContent,o=t.closest(".js-suggested-changes-blob");if(e.getAttribute("data-thread-side")!==""){if(e.getAttribute("data-thread-side")==="left")return xe(s,o),t.remove()}else{const C=t.closest(".js-inline-comment-form"),N=C.querySelector('input[name="side"]');if(!C||!N)return t.remove();if(C&&N.value==="left")return xe(s,o),t.remove()}const i=t.previousElementSibling,c=i.querySelector(".js-blob-code-deletion"),g=i.querySelectorAll(".js-blob-code-addition");if(!c||g.length===0)return;const P=c.textContent,D=Array.from(g).map(C=>C.textContent);if(P===D.join(`
`))return xe(n,o),t.remove();t.remove()}}),(0,l.N7)(".js-comment-body .js-apply-changes",{add(t){const e=t.closest(".js-suggested-changes-container");if(!e)return t.remove();const n=e.querySelector(".js-suggested-changes-template");if(!(n instanceof HTMLTemplateElement))return t.remove();const s=n.content.cloneNode(!0),o=s.querySelector(".js-disabled-apply-suggestion-button");let i;try{i=s.querySelector(".js-batched-suggested-changes-add")}catch(V){if(V.name!=="QueryError")throw V}if(document.querySelectorAll(".js-suggested-changes-files-tab").length){const V=document.querySelector(ie.addToBatchEnabled).textContent;i&&(i.removeAttribute("disabled"),i.setAttribute("aria-label",V))}const c=document.querySelector(".js-pull-header-details"),g=c&&c.getAttribute("data-pull-is-open")==="true",P=t.closest(".js-resolvable-timeline-thread-container"),D=n.getAttribute("data-comment-pending")==="true",C=n.getAttribute("data-in-merge-queue")==="true",N=e.classList.contains("js-selection-contains-deletions");if(P&&P.getAttribute("data-resolved")==="true"){const V=document.querySelector(ie.resolvedThread).textContent,ae=s.querySelector("details");return ae&&ae.remove(),me(o,V),i&&(i.setAttribute("disabled","disabled"),i.setAttribute("aria-label",V)),t.replaceWith(s)}if(!g){const V=document.querySelector(ie.closedOrMergedPull).textContent;return me(o,V),i&&(i.setAttribute("disabled","disabled"),i.setAttribute("aria-label",V)),t.replaceWith(s)}if(C){const V=document.querySelector(ie.inMergeQueue);let ae="";V&&(ae=V.textContent||"");const de=s.querySelector("details");return de&&de.remove(),me(o,ae),i&&(i.setAttribute("disabled","disabled"),i.setAttribute("aria-label",ae)),t.replaceWith(s)}if(D){const V=document.querySelector(ie.pendingReview).textContent;return s.querySelector("details").remove(),me(o,V),i&&(i.setAttribute("disabled","disabled"),i.setAttribute("aria-label",V)),t.replaceWith(s)}if(N){const V=document.querySelector(ie.leftBlob).textContent;return s.querySelector("details").remove(),me(o,V),i&&(i.setAttribute("disabled","disabled"),i.setAttribute("aria-label",V)),t.replaceWith(s)}const U=document.querySelector(".js-suggested-changes-subset-files"),Y=n.getAttribute("data-outdated-comment")==="true";if(U||Y){let V;return U?V=document.querySelector(ie.viewingSubset).textContent:Y&&(V=document.querySelector(ie.outdatedComment).textContent),s.querySelector("details").remove(),me(o,V),i&&(i.setAttribute("disabled","disabled"),i.setAttribute("aria-label",V)),t.replaceWith(s)}const J=s.querySelector(".js-single-suggested-change-form"),oe=t.closest(".js-suggested-changes-blob");if(oe){const V=oe.querySelector(".js-blob-code-deletion"),ae=oe.querySelectorAll(".js-blob-code-addition");if(!V)return;const de=V.textContent,ve=Array.from(ae).map(pe=>pe.textContent);if(ve.length>0&&de===ve.join(`
`)){const pe=document.querySelector(ie.unchangedSuggestion).textContent;s.querySelector("details").remove(),me(o,pe),i&&(i.setAttribute("disabled","disabled"),i.setAttribute("aria-label",pe))}else for(const pe of ve){const je=document.createElement("input");je.setAttribute("type","hidden"),je.setAttribute("name","value[]"),je.value=pe,J.appendChild(je)}}t.replaceWith(s)}}),(0,l.N7)(".js-pull-header-details",{add(t){const e=t.getAttribute("data-pull-is-open")==="true",n=document.querySelector(".js-suggested-changes-template");if(e||!(n instanceof HTMLTemplateElement))return;const s=n.content,o=document.querySelector(ie.closedOrMergedPull).textContent;Re(s,o),Be(o)}}),(0,l.N7)(".js-suggested-changes-subset-files",{add(){const t=document.querySelector(".js-suggested-changes-template");if(!(t instanceof HTMLTemplateElement))return;const e=t.content,n=document.querySelector(ie.viewingSubset).textContent;Re(e,n),Be(n)}}),(0,f.on)("click",".js-apply-suggestion-button",async function(t){const e=t.currentTarget.parentElement;if(e){const n=e.querySelector(".js-suggestion-commit-title");setTimeout(()=>n.focus(),1)}}),(0,f.on)("click",".js-dismiss-suggested-change-onboarding-notice",async function(t){const e=t.currentTarget.getAttribute("data-url"),n=t.currentTarget.parentElement.querySelector(".js-data-url-csrf"),s=new FormData;if(s.append("notice","suggested_changes_onboarding_prompt"),(await fetch(e,{method:"POST",mode:"same-origin",body:s,headers:{"Scoped-CSRF-Token":n.value,"X-Requested-With":"XMLHttpRequest"}})).ok){const i=document.querySelectorAll(".js-suggested-change-onboarding-notice");for(const c of i)c.remove()}}),(0,De.w4)("keypress",".js-comment-field",function(t){if(t.key==="Enter"){const e=t.target;jt(e)&&t.preventDefault()}}),(0,De.w4)("keypress",".js-suggestion-commit-message",function(t){const e=t.currentTarget;t.key==="Enter"&&e.setAttribute("rows","3")});function At(t){const n=t.closest(".js-review-state-classes").querySelectorAll("[data-pending-batched-suggestion]").length;for(const o of document.querySelectorAll(".js-pending-batched-suggested-changes-count"))o.textContent=String(n);const s=document.querySelector(".js-reenable-add-to-batch").textContent;for(const o of document.querySelectorAll("[data-batched-suggestion-reenable-sibling]"))o.removeAttribute("data-batched-suggestion-reenable-sibling"),o.removeAttribute("disabled"),o.setAttribute("aria-label",s);if(n>0){t.hidden=!1;const o=t.querySelector(".js-batched-suggested-changes-toggle");o.classList.add("anim-pulse-in"),o.addEventListener("animationend",()=>o.classList.remove("anim-pulse-in"),{once:!0});for(const i of document.querySelectorAll(".js-apply-single-suggestion"))i.classList.add("d-none");for(const i of document.querySelectorAll(".js-batched-suggested-changes-add")){const c=i.closest(".js-suggested-change-form-container");c.getAttribute("data-pending-batched-suggestion")==="true"||c.getAttribute("data-comment-pending")==="true"||c.getAttribute("data-outdated-comment")==="true"?i.classList.add("d-none"):i.classList.remove("d-none"),i.getAttribute("data-batched-suggestion-disabled-by-sibling")==="true"&&(i.removeAttribute("data-batched-suggestion-disabled-by-sibling"),i.setAttribute("disabled","disabled"),i.setAttribute("aria-label",document.querySelector(".js-one-suggestion-per-line").textContent))}for(const i of document.querySelectorAll(".js-batched-suggested-changes-remove"))i.closest(".js-suggested-change-form-container").getAttribute("data-pending-batched-suggestion")==="true"?i.classList.remove("d-none"):i.classList.add("d-none");for(const i of document.querySelectorAll(".js-focus-commit-suggestions-form-button")){const c=i.closest(".js-suggested-change-form-container"),g=c.getAttribute("data-comment-pending")==="true",P=c.getAttribute("data-outdated-comment")==="true",D=c.getAttribute("data-resolved-comment")==="true",U=i.closest(".js-inline-comments-container").querySelector('input[name="side"]').value==="left";g||P||D||U?i.classList.add("d-none"):i.classList.remove("d-none")}for(const i of document.querySelectorAll(".js-pending-batched-suggestion-label"))i.closest(".js-suggested-change-form-container").getAttribute("data-pending-batched-suggestion")==="true"?i.classList.remove("d-none"):i.classList.add("d-none")}else{t.hidden=!0;for(const o of document.querySelectorAll(".js-apply-single-suggestion"))o.classList.remove("d-none");for(const o of document.querySelectorAll(".js-batched-suggested-changes-add"))o.classList.remove("d-none");for(const o of document.querySelectorAll(".js-batched-suggested-changes-remove"))o.classList.add("d-none");for(const o of document.querySelectorAll(".js-focus-commit-suggestions-form-button"))o.classList.add("d-none");for(const o of document.querySelectorAll(".js-pending-batched-suggestion-label"))o.classList.add("d-none")}}r(At,"updatePendingSuggestionsState");function Pe(){const t=document.querySelector(".js-batched-suggested-changes-container");t&&setTimeout(()=>At(t))}r(Pe,"updatePendingSuggestionsHandler"),(0,f.on)("click",".js-batched-suggested-changes-add",function(t){const e=t.target,n=e.closest(".js-suggested-change-form-container");if(n.getAttribute("data-comment-pending")==="true"||n.getAttribute("data-outdated-comment")==="true"||e.getAttribute("data-batched-suggestion-disabled-by-sibling")==="true")return;n.setAttribute("data-pending-batched-suggestion","true");const s=e.closest(".js-inline-comments-container");for(const o of s.querySelectorAll(".js-batched-suggested-changes-add"))o.setAttribute("data-batched-suggestion-disabled-by-sibling","true");e.removeAttribute("data-batched-suggestion-disabled-by-sibling"),Pe()}),(0,f.on)("click",".js-batched-suggested-changes-remove",function(t){t.currentTarget.closest(".js-suggested-change-form-container").removeAttribute("data-pending-batched-suggestion");const n=t.currentTarget.closest(".js-inline-comments-container");for(const s of n.querySelectorAll(".js-batched-suggested-changes-add"))s.setAttribute("data-batched-suggestion-reenable-sibling","true");Pe()}),(0,f.on)("click",".js-focus-commit-suggestions-form-button",function(t){t.preventDefault(),window.location.href="#clear-commit-suggestions",window.location.href="#commit-suggestions"}),(0,f.on)("click",".js-dismiss-batched-suggested-changes-onboarding-notice",async function(t){const e=t.currentTarget.getAttribute("data-url"),n=t.currentTarget.parentElement.querySelector(".js-data-url-csrf"),s=new FormData;if(s.append("notice","batched_suggested_changes_onboarding_prompt"),(await fetch(e,{method:"POST",mode:"same-origin",body:s,headers:{"Scoped-CSRF-Token":n.value,"X-Requested-With":"XMLHttpRequest"}})).ok)for(const i of document.querySelectorAll(".js-batched-suggested-change-onboarding-notice"))i.remove()});function He(t,e){const n=t.querySelector("input[name=commit_title]"),s=t.querySelector("textarea[name=commit_message]");let o=n.value.trim();o===""&&(o=n.defaultValue);const i=s.value.trim();i!==""&&(o=`${o}

${i}
`),n.disabled=!0,s.disabled=!0;const c=document.createElement("input");c.setAttribute("type","hidden"),c.setAttribute("name","message"),c.value=o,t.appendChild(c);const g=document.createElement("input");g.setAttribute("type","hidden"),g.setAttribute("name","changes"),g.value=JSON.stringify(e),t.appendChild(g)}r(He,"convertFormInputs"),(0,f.on)("click",".js-single-suggested-change-form .js-suggested-changes-submit",function(t){const n=t.currentTarget.closest(".js-single-suggested-change-form"),s=Array.from(n.querySelectorAll('input[name="value[]"]')).map(i=>i.value),o=[{commentId:n.querySelector("input[name=comment_id]").value,path:n.querySelector("input[name=path]").value,suggestion:s}];He(n,o)}),(0,T.AC)(".js-single-suggested-change-form",async function(t,e){const n=t.closest(".js-suggested-change-form-container"),s=t.closest("details"),o=n.querySelector(".js-suggestion-applied"),c=t.closest(".js-suggested-changes-contents").querySelector(".js-error-message-placeholder");try{await e.json(),o.classList.remove("d-none"),n.querySelector(".js-batched-suggested-changes-add").classList.add("d-none"),s.remove(),window.location.reload()}catch(g){if(g.name!=="QueryError"){const P=g.response.json&&g.response.json.error,D=c.querySelector(".js-error-message");c.hidden=!1,D.textContent=P,n.prepend(c),t.closest(".js-suggested-change-form-container").querySelector(".js-batched-suggested-changes-add").classList.add("d-none"),s.remove()}}}),(0,f.on)("click",".js-suggestion-batch-submit",function(t){const e=t.currentTarget.closest(".js-batched-suggested-changes-form"),n=[];for(const s of document.querySelectorAll("[data-pending-batched-suggestion]")){const o=s.querySelector(".js-single-suggested-change-form"),i=Array.from(o.querySelectorAll('input[name="value[]"]')).map(c=>c.value);n.push({commentId:o.querySelector("input[name=comment_id]").value,path:o.querySelector("input[name=path]").value,suggestion:i})}He(e,n)}),(0,T.AC)(".js-batched-suggested-changes-form",async function(t,e){try{await e.json();const n=t.closest(".js-batched-suggested-changes-container");n.hidden=!0,window.location.reload()}catch(n){const s=n.response.json&&n.response.json.error,i=t.closest(".js-batched-suggested-changes-container").querySelector(".js-error-message-container"),c=i.querySelector(".js-error-message");c.textContent=s,i.hidden=!1}}),(0,l.N7)(".js-files-tab-stale",{add(){const t=document.querySelector(".js-batched-suggested-changes-container");t&&setTimeout(()=>{t.hidden=!0})}});let Et=0;(0,f.on)("click",".js-add-single-line-comment",function(t){const e=t.currentTarget,n=e.closest(".file");We(n);const s=Tt(e)||Ct(e),o=$e(s.querySelector("td"),e),i=o.querySelector(".js-inline-comment-form");i instanceof HTMLFormElement&&Qe(i,e),(0,v.j)(o)});function Tt(t){const e=t.closest("tr"),n=Ne(e,".js-inline-comments-container");if(n instanceof Element)return n}r(Tt,"existingCommentRow");function Ne(t,e){const n=t.nextElementSibling;return n&&n.matches(e)?n:null}r(Ne,"next");function Ct(t){const e=t.closest("tr"),n=qe("js-inline-comments-single-container-template",t).firstElementChild;return e.after(n),n}r(Ct,"insertCommentRow");function $e(t,e){const n=Array.from(t.querySelectorAll(".review-comment-form-container")).pop();if(n)return n.closest("div.js-line-comments");{const s=qe("js-inline-comments-single-container-template",e).querySelector("div.js-line-comments");return t.appendChild(s),s}}r($e,"findOrInsertCommentThread"),(0,f.on)("click",".js-add-split-line-comment",function(t){const e=t.currentTarget,n=e.closest(".file");We(n);const s=e.closest("tr"),o=e.getAttribute("data-type")==="addition"?"js-addition":"js-deletion",i=_t(s),c=Ot(i,o,e),g=$e(c,e),P=g.querySelector(".js-inline-comment-form");P instanceof HTMLFormElement&&Qe(P,e),(0,v.j)(g)}),(0,T.AC)(".js-inline-comment-form",async function(t,e){xt(t);let n;try{n=await e.json()}catch(g){if(g.response){let P;try{P=g.response.json}catch{}if(P){qt(t,P);return}}throw g}const s=n.json,o=s.inline_comment,i=t.closest(".js-line-comments");o&&i.querySelector(".js-comments-holder").append((0,p.r)(document,o));const c=s.inline_comment_thread;c&&i.replaceWith((0,p.r)(document,c)),(0,v.w)(t)});function xt(t){const e=t.querySelector(".js-comment-form-error");e&&(e.hidden=!0,e.textContent=null)}r(xt,"resetInlineCommentError");function qt(t,e){const n=t.querySelector(".js-comment-form-error");let s;e.errors?Array.isArray(e.errors)?s=e.errors.join(", "):s=e.errors:s="There was an error posting your comment.",n.textContent=s,n.style.display="block",n.hidden=!1,n.classList.remove("d-none")}r(qt,"handleInlineCommentError");function Mt(t){const[e,n]=t.match(/^new_inline_comment_(?:discussion|diff)_(?:[\w-]+)_(\d+)_(\d+)$/)||[];if(!e)return;const s=document.querySelector(`.js-inline-comment-form input[name='in_reply_to'][value='${n}']`);if(!s)return;const o=s.closest(".js-line-comments");o&&(0,v.j)(o)}r(Mt,"showReplyForm");function kt(t){const[e,n]=t.match(/^new_inline_comment_diff_(?:[\w-]+)_(\d+)$/)||[];if(!e)return;const s=document.querySelector(`.js-add-line-comment[data-anchor='${e}'][data-position='${n}']`);s&&s.click()}r(kt,"showCommentForm"),document.addEventListener("session:resume",function(t){const e=t.detail;Mt(e.targetId),kt(e.targetId)});function We(t){const e=t.querySelector(".js-toggle-file-notes");e instanceof HTMLInputElement&&(0,te.Se)(e,!0)}r(We,"ensureInlineNotesEnabled");function Ue(){for(const t of document.querySelectorAll(".file .js-inline-comments-container")){const n=t.querySelectorAll(".js-comments-holder > *").length>0,s=t.querySelector("[data-resolved='true']")!=null,o=t.querySelector(".js-inline-comment-form-container"),i=!!o&&o.classList.contains("open");!(n||s)&&!i&&t.remove()}}r(Ue,"cleanupInlineCommentContainers"),(0,l.N7)(".js-comment",{remove:Ue}),(0,f.on)("inlinecomment:focus",".js-inline-comment-form-container",function(t){const e=t.target.querySelector(".js-suggested-changes-container");e&&Ve(e)}),(0,l.N7)(".js-suggested-changes-container.is-comment-editing",t=>{Ve(t)});function It(t,e){const n=new URLSearchParams(t.search.slice(1)),s=e.elements.namedItem("in_reply_to")||e.elements.namedItem("comment_id"),o=e.querySelector("textarea");if(n.append("textarea_id",o.id),s instanceof HTMLInputElement&&s.value)return n.append("comment_id",s.value),n;const i=e.elements.namedItem("path"),c=e.elements.namedItem("start_side"),g=e.elements.namedItem("start_line"),P=e.elements.namedItem("side"),D=e.elements.namedItem("line"),C=e.elements.namedItem("start_commit_oid"),N=e.elements.namedItem("end_commit_oid"),U=e.elements.namedItem("base_commit_oid");return!(i instanceof HTMLInputElement)||!(c instanceof HTMLInputElement)||!(g instanceof HTMLInputElement)||!(P instanceof HTMLInputElement)||!(D instanceof HTMLInputElement)||!(C instanceof HTMLInputElement)||!(N instanceof HTMLInputElement)||!(U instanceof HTMLInputElement)?null:(n.append("path",i.value),n.append("start_side",c.value),n.append("start_line",g.value),n.append("end_side",P.value),n.append("end_line",D.value),n.append("start_commit_oid",C.value),n.append("end_commit_oid",N.value),n.append("base_commit_oid",U.value),n)}r(It,"paramsForSuggestionButton");async function Ve(t){const e=t.querySelector(".js-suggestion-button-placeholder");if(!e)return;const n=e.getAttribute("data-src-base");if(!n)return;const s=new URL(n,window.location.origin),o=e.closest(".js-inline-comment-form")||e.closest(".js-comment-update");if(!(o instanceof HTMLFormElement))return;const i=It(s,o);if(!i)return;s.search=i.toString();const c=await(0,h.a)(document,s.toString());e.innerHTML="",e.appendChild(c)}r(Ve,"loadSuggestionButton"),document.addEventListener("inlinecomment:collapse",()=>{Ue()});function Ot(t,e,n){const s=t.querySelector(`.js-line-comments.${e}`);if(s)return s;const o=qe("js-inline-comments-split-form-container-template",n).firstElementChild;o.classList.add(e);const i=t.querySelectorAll(`.${e}`);i[i.length-1].after(o);for(const g of i)g.remove();return o}r(Ot,"expandLineCommentsEmptyCells");function _t(t){let e=Ne(t,".js-inline-comments-container");if(e)return e;{const n="js-inline-comments-split-container-template",s=document.getElementById(n);if(!s)throw new Error(`Could not find element with id ${n}`);if(!(s instanceof HTMLTemplateElement))throw new Error(`Found element with id ${n} - but was not a Template`);return e=new W.R(s,{}).firstElementChild,t.after(e),e}}r(_t,"inlineCommentsSplitContainerForLine");function ze(t,e,n,s){if(t.classList.remove("color-bg-success","color-bg-danger"),s){t.textContent=e;return}if(n==="right"){t.classList.add("color-fg-success"),t.textContent=`+${e}`;return}if(n==="left"){t.classList.add("color-fg-danger"),t.textContent=`-${e}`;return}t.textContent=String(e)}r(ze,"applyMultiLinePreview");const Ke={R:"right",L:"left"};function Dt(t,e){const n=(0,k.vu)();if(!n||n.end.is(n.start))return;if(!(0,k.Oz)(e,n)){(0,k.MO)();return}const{start:{lineNumber:s},end:{lineNumber:o}}=n;let{start:{side:i},end:{side:c}}=n;const g=Number(e.getAttribute("data-line")),P=e.getAttribute("data-side");if(g!==o||!n.end.isContext()&&P!==Ke[c]){(0,k.MO)();return}const D=Ke[i],C=t.elements.namedItem("start_line"),N=t.elements.namedItem("start_side"),U=t.elements.namedItem("line"),Y=t.elements.namedItem("side"),J=t.elements.namedItem("preview_start_side"),oe=t.elements.namedItem("preview_side");if(C instanceof HTMLInputElement&&N instanceof HTMLInputElement&&U instanceof HTMLInputElement&&Y instanceof HTMLInputElement&&J instanceof HTMLInputElement&&oe instanceof HTMLInputElement){C.value=String(s),N.value=D,N.value=J.value=N.value,oe.value=Y.value;const V=C.value;i=N.value;const ae=U.value;c=Y.value;const de=t.closest(".js-inline-comment-form-container");if(V&&ae){const ve=de.querySelector(".js-multi-line-preview"),pe=ve.querySelector(".js-multi-line-preview-start"),je=ve.querySelector(".js-multi-line-preview-end"),jn=n.start.isContext(),Ln=n.end.isContext();ze(pe,V,i,jn),ze(je,ae,c,Ln),ve.hidden=!1,de.classList.add("is-multiline")}else de.querySelector(".js-multi-line-preview").hidden=!0,de.classList.remove("is-multiline");Fe(de)}}r(Dt,"fillMultilineFormFields");function Qe(t,e){var n;const s=["type","path","position","line","side","original-line"];for(const i of s){const c=t.elements.namedItem(i);if(c instanceof HTMLInputElement){const g=e.getAttribute(`data-${i}`)||"";c.value=g}}const o=(n=t.getElementsByClassName("js-expanded-diff-placeholder-value"))==null?void 0:n[0];if(o instanceof HTMLInputElement){const i=e.getAttribute("data-expanded-diff")||"";o.value=i}Dt(t,e)}r(Qe,"fillTemplateFormFields");function qe(t,e){const n=document.getElementById(t);if(!n)throw new Error(`Could not find element with id ${t}`);if(!(n instanceof HTMLTemplateElement))throw new Error(`Found element with id ${t} - but was not a Template`);return new W.R(n,{anchor:e.getAttribute("data-anchor")||"",position:e.getAttribute("data-position")||"",sequence:Et++})}r(qe,"renderCommentTemplate");var we=d(99481),be=d(67647),Rt=d(61124);(0,l.N7)(".js-diff-progressive-container",function(t){Ze(t);const e=t.querySelector(".js-diff-progressive-loader");!e||e.addEventListener("load",function(){Ze(t)})});function Bt(t,e){var n;const s=t.querySelectorAll(".js-comment-container");for(const o of s){const i=o.getAttribute("data-thread-comments-ids");if(i){const c=i.split(","),g=(n=e.match(/\d+/g))==null?void 0:n[0];if(g&&c.includes(g)){(0,Rt.$)(o);break}}}}r(Bt,"loadResolvedComments");function Ze(t){const e=Ge();if(!e)return;Xe(t,e);const n=Ft(t,e);!n||((0,E.zT)(n),Ye(n))}r(Ze,"processProgressiveContainer"),(0,l.N7)(".js-diff-load-container",function(t){const e=t.querySelector(".js-diff-entry-loader");!e||e.addEventListener("load",function(){t.closest(".js-file").classList.remove("hide-file-notes-toggle");const s=Ge();!s||Xe(t,s)})}),(0,f.on)("click",".js-diff-load",function(t){if(t.target.classList.contains("js-ignore-this"))return;const e=t.currentTarget.closest(".js-diff-load-container");Ye(e)});function Ge(){return window.location.hash.slice(1)}r(Ge,"urlAnchor");function Xe(t,e){let n;e.match(/^diff-.+[LR]\d+-[LR]\d+/)?n=(0,be.Q)(t.ownerDocument,e.substring(0,e.indexOf("-",5))):n=(0,be.Q)(t.ownerDocument,e),n&&t.contains(n)?((0,we.O4)(n),(0,E.zT)(n)):Bt(t,e)}r(Xe,"scrollToAnchor");function Ft(t,e){const n=Pt(t,e);return n||Ht(t,e)}r(Ft,"getEntryFromAnchor");function Pt(t,e){const n=/^(diff-[0-9a-f]{32})(?:[L|R]\d+)?$/.exec(e);if(!n)return;const s=n[1],o=t.querySelector(`a[name='${s}']`);if(!o)return;const i=o.nextElementSibling;if(!(i&&!i.querySelector(".js-diff-load-container")))return i}r(Pt,"getEntryFromDiffAnchor");function Ht(t,e){const n=/^(?:r|commitcomment-)(\d+)$/.exec(e);if(!n)return;const s=n[1],o=t.querySelector(`#diff-with-comment-${s}`);return o?o.closest(".js-file"):void 0}r(Ht,"getEntryFromCommentAnchor");function Ye(t){const e=t.querySelector(".js-diff-entry-loader"),n=t.querySelector(".js-diff-placeholder"),s=t.querySelector("button.js-diff-load"),o=t.querySelector(".js-button-text");n.setAttribute("fill","url('#animated-diff-gradient')"),o.textContent=s.getAttribute("data-disable-with")||"",s.disabled=!0;const i=new URL(e.getAttribute("data-fragment-url")||"",window.location.origin);return e.src=i.toString(),e.data}r(Ye,"loadDiff");var Nt=d(68842);(0,f.on)("click",".js-rendered, .js-source",function(t){const e=t.currentTarget;if(e.classList.contains("selected")){t.preventDefault();return}$t(e),Wt(e)}),(0,T.AC)(".js-prose-diff-toggle-form",async function(t,e){const n=t.closest(".js-details-container"),s=n.querySelector(".js-file-content"),o=await e.html();for(;s.lastChild;)s.removeChild(s.lastChild);s.append(o.html),n.classList.toggle("display-rich-diff"),n.classList.toggle("show-inline-notes")});function $t(t){const e=t.closest(".js-file-header"),n=t.classList.contains("js-rendered"),s=t.classList.contains("js-source"),o=e.getAttribute("data-short-path"),i=e.getAttribute("data-anchor"),c=new URL(window.location.href,window.location.origin),g=new URLSearchParams(c.search.slice(1));c.hash=i,n?g.set("short_path",o):s&&g.delete("short_path"),c.search=g.toString(),(0,Nt.lO)(null,"",c.toString())}r($t,"updateWindowLocation");function Wt(t){for(const e of document.querySelectorAll(".js-rendered, .js-source"))e.classList.remove("selected"),e.removeAttribute("aria-current");t.classList.add("selected"),t.setAttribute("aria-current","true")}r(Wt,"updateSelectedButton"),(0,f.on)("click",".js-toc-retry",function(t){if(!(t.target instanceof Element))return;const n=t.target.closest(".select-menu").querySelector("include-fragment"),s=n.getAttribute("src");n.setAttribute("src",""),n.setAttribute("src",s)});var Ut=d(97807);function Je(t,e,n){const s=Array.from(t.querySelectorAll('[role="menuitem"]'));let o=s.indexOf(e),i=s.indexOf(n);if(o===-1)throw new Error("Couldn't find startIndex in container");if(i===-1)throw new Error("Couldn't find endItem in container");et(t),s[i].classList.add("is-last-in-range"),o>i&&([o,i]=[i,o]);for(const c of s.slice(o,i+1))c.classList.add("is-range-selected")}r(Je,"highlightSelectedRange");async function Vt(t,e){function n(s){Je(t,e,s.target.closest('[role="menuitem"]'))}r(n,"highlightRange"),Je(t,e,e),t.addEventListener("mouseover",n),await new Promise(s=>window.addEventListener("keyup",s,{once:!0})),t.removeEventListener("mouseover",n),et(t)}r(Vt,"observeShiftRangeHighlights");function et(t){for(const e of t.querySelectorAll('[role="menuitem"]'))e.classList.remove("is-range-selected","is-last-in-range")}r(et,"resetHighlight"),(0,l.N7)(".js-diffbar-range-menu .js-diffbar-range-list",{subscribe:zt});function zt(t){const e=t.closest("details-menu");let n=!1;function s(i){n=i.shiftKey,n&&i.preventDefault()}r(s,"clicked");function o(i){if(!n)return;i.preventDefault();const c=i.detail.relatedTarget;if(c.classList.contains("is-range-selected")){i.stopPropagation();const g=t.querySelectorAll(".is-range-selected"),P=g[0],D=g[1],C=t.getAttribute("data-range-url"),N=P.getAttribute("data-parent-commit"),U=D.getAttribute("data-commit"),Y=N&&U?`${N}..${U}`:U,J=C.replace("$range",Y);(0,Ut.ZP)({url:J,container:document.querySelector("#js-repo-pjax-container")})}else i.stopImmediatePropagation(),Vt(t,c)}return r(o,"selected"),t.addEventListener("click",s,{capture:!0}),e.addEventListener("details-menu-select",o),{unsubscribe:()=>{t.removeEventListener("click",s,{capture:!0}),e.removeEventListener("details-menu-select",o)}}}r(zt,"manageRangeHighlight"),(0,f.on)("toggle",".js-diffbar-range-menu",function(t){const e=t.currentTarget;if(!e.hasAttribute("open"))return;const n=e.querySelector(".in-range");n&&n.focus()},{capture:!0});var tt=d(44088);(0,f.on)("click",".js-compare-tab",function(t){for(const s of document.querySelectorAll(".js-compare-tab.selected"))s.classList.remove("selected");t.currentTarget.classList.add("selected");for(const s of document.querySelectorAll("#commits_bucket, #files_bucket, #commit_comments_bucket"))s.classList.add("d-none");const n=t.currentTarget.hash;document.querySelector(n).classList.remove("d-none"),t.preventDefault()}),(0,j.Z)(function({target:t}){if(!(t instanceof HTMLElement))return;const e=t.closest("#commits_bucket, #files_bucket, #commit_comments_bucket");e&&e instanceof HTMLElement&&!(0,tt.Z)(e)&&document.querySelector(`.js-compare-tab[href="#${e.id}"]`).click()}),(0,f.on)("click",".js-toggle-range-editor-cross-repo",function(){document.querySelector(".js-range-editor").classList.toggle("is-cross-repo")}),(0,f.on)("pjax:click",".js-range-editor",function(t){const e=document.querySelector(".js-compare-pr");if(e&&e.classList.contains("open")){const n=t.detail.options,s=new URL(n.url,window.location.origin);s.search.match(/expand=1/)||(s.search+=`${s.search?"&":""}expand=1`,n.url=s.toString())}}),(0,l.N7)(".js-compare-pr.open",{add(){document.body.classList.add("is-pr-composer-expanded")},remove(){document.body.classList.remove("is-pr-composer-expanded")}}),(0,f.on)("change",".js-collab-checkbox",function({currentTarget:t}){const e=t.form;for(const o of e.querySelectorAll(".errored"))o.classList.remove("errored");const s=t.closest(".js-collab-option").querySelector(".js-status-indicator");s.classList.remove("status-indicator-success","status-indicator-failed"),s.classList.add("status-indicator-loading")}),(0,T.AC)(".js-collab-form",async function(t,e){try{await e.text()}catch{for(const s of t.querySelectorAll(".status-indicator-loading")){s.classList.remove("status-indicator-loading"),s.classList.add("status-indicator-failed");const o=s.closest(".js-collab-option");o.classList.add("errored");const i=o.querySelector(".js-collab-checkbox");i.checked=!i.checked}for(const s of t.querySelectorAll(".status-indicator-success"))s.classList.remove("status-indicator-success");return}for(const n of t.querySelectorAll(".errored"))n.classList.remove("errored");for(const n of t.querySelectorAll(".status-indicator-loading"))n.classList.remove("status-indicator-loading"),n.classList.add("status-indicator-success")});var re=d(93673),Kt=Object.defineProperty,Qt=Object.getOwnPropertyDescriptor,Se=r((t,e,n,s)=>{for(var o=s>1?void 0:s?Qt(e,n):e,i=t.length-1,c;i>=0;i--)(c=t[i])&&(o=(s?c(e,n,o):c(o))||o);return s&&o&&Kt(e,n,o),o},"__decorateClass"),nt=r((t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},"__accessCheck"),st=r((t,e,n)=>(nt(t,e,"read from private field"),n?n.call(t):e.get(t)),"__privateGet"),Zt=r((t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},"__privateAdd"),Gt=r((t,e,n,s)=>(nt(t,e,"write to private field"),s?s.call(t,n):e.set(t,n),n),"__privateSet"),Ae;let ye=r(class extends HTMLElement{constructor(){super(...arguments);Zt(this,Ae,null),this.handleSidebarScroll=()=>{Gt(this,Ae,requestAnimationFrame(this.updateSidebarHeight))},this.updateSidebarHeight=()=>{if(!this.sidebarContainer)return;const t=document.documentElement.clientHeight,e=this.prToolbar.getBoundingClientRect(),n=this.mainContainer.getBoundingClientRect(),s=t>=n.bottom,o=e.top===0;let i;s?i=n.bottom-e.height:o?i=t-e.height:i=t-e.height-e.top,this.sidebarContainer.style.height=`${i}px`}}connectedCallback(){!this.sidebarContainer||(window.addEventListener("scroll",this.handleSidebarScroll),this.handleSidebarScroll())}disconnectedCallback(){!this.sidebarContainer||(window.removeEventListener("scroll",this.handleSidebarScroll),st(this,Ae)!=null&&cancelAnimationFrame(st(this,Ae)))}toggleSidebar(t){var e;this.layoutContainer.classList.toggle("hx_Layout--sidebar-hidden"),(e=this.fileTree)==null||e.instrumentToggleFileTree(t.detail.toggleButton)}},"DiffLayoutElement");Ae=new WeakMap,Se([re.fA],ye.prototype,"layoutContainer",2),Se([re.fA],ye.prototype,"prToolbar",2),Se([re.fA],ye.prototype,"mainContainer",2),Se([re.fA],ye.prototype,"sidebarContainer",2),Se([re.fA],ye.prototype,"fileTree",2),ye=Se([re.Ih],ye),(0,f.on)("click",".js-split-diff-view",function(){const t=document.querySelector(".js-unified-diff-view-box"),e=document.querySelector(".js-split-diff-view-box"),n=document.querySelector(".js-split-diff-view-option"),s=document.querySelector(".js-unified-diff-view-option");e.classList.add("color-border-accent-emphasis"),e.classList.remove("color-border-default"),t.classList.remove("color-border-accent-emphasis"),t.classList.add("color-border-default"),s.checked=!1,n.checked=!0}),(0,f.on)("click",".js-unified-diff-view",function(){const t=document.querySelector(".js-unified-diff-view-box"),e=document.querySelector(".js-split-diff-view-box"),n=document.querySelector(".js-split-diff-view-option"),s=document.querySelector(".js-unified-diff-view-option");e.classList.remove("color-border-accent-emphasis"),e.classList.add("color-border-default"),t.classList.add("color-border-accent-emphasis"),t.classList.remove("color-border-default"),s.checked=!0,n.checked=!1});var Xt=d(61075);(0,f.on)("details:toggled",".js-pull-merging",function({currentTarget:t}){const e=Array.from(t.querySelectorAll(".js-merge-pull-request")),n=e.some(tt.Z);for(const s of e)s.classList.toggle("is-dirty",n)}),(0,f.on)("click",".js-merge-box-try-again",async function({currentTarget:t}){const e=t.getAttribute("data-form-target");if(!["js-cleanup-branch-form","js-merge-branch-form","js-queue-branch-form","js-update-branch-form"].includes(e))return;const s=t.closest(".js-pull-merging").getElementsByClassName(e)[0];(0,f.f)(s,"submit")}),document.addEventListener("session:resume",function(t){const e=document.getElementById(t.detail.targetId);if(e){const n=e.closest(".js-merge-pull-request");if(n){const s=n.closest(".js-details-container");s&&s.classList.add("open")}}}),(0,f.on)("change",".js-admin-merge-override",function({currentTarget:t}){const e=t.closest(".js-merge-message-container"),n=t.checked,s=e.querySelector(".js-merge-box"),o=e.querySelector(".js-auto-merge-box"),i=e.querySelector(".js-merge-form"),c=e.querySelector(".js-auto-merge-form"),g=e.querySelector(".js-queue-branch-form"),P=e.querySelectorAll(".merge-box-button");s&&(s.hidden=!n),o&&(o.hidden=n),i&&(i.hidden=!n),c&&(c.hidden=n),g&&(g.hidden=n);for(const D of P)D.disabled=!n}),(0,f.on)("details-menu-selected",".js-update-branch-method-menu",Yt,{capture:!0});function Yt(t){const e=t.detail.relatedTarget,n=e.closest(".js-merge-pr");n.classList.toggle("is-updating-via-merge",e.value==="merge"),n.classList.toggle("is-updating-via-rebase",e.value==="rebase");const s=n.querySelector(".js-update-branch-type");s&&(s.value=e.value)}r(Yt,"updateBranchUpdateMethod"),(0,f.on)("submit",".js-update-branch-form",function({currentTarget:t}){var e;const n=t.closest(".js-merge-pr"),s=n==null?void 0:n.querySelector(".btn-group-update-merge");s&&(s.disabled=!0);const o=n==null?void 0:n.querySelector(".btn-group-update-rebase");o&&(o.disabled=!0);const i=n==null?void 0:n.querySelector(".js-update-method-menu-button");i&&(i.classList.add("disabled","user-select-none"),i.setAttribute("aria-disabled","true"));const c=n==null?void 0:n.querySelector(".js-update-branch-method-menu");c&&((e=c==null?void 0:c.parentNode)==null||e.removeChild(c))}),(0,f.on)("details-menu-selected",".js-merge-method-menu",Jt,{capture:!0});function Jt(t){const e=t.detail.relatedTarget,n=e.closest(".js-merge-pr"),s=n.querySelector(".js-merge-pull-request"),o=n.querySelector(".js-merge-method-menu-button"),i=o.getAttribute("data-merge-button-class");o.classList.toggle("btn-danger",e.hasAttribute("data-dangerous-action")),i&&o.classList.toggle(i,!e.hasAttribute("data-dangerous-action"));const c=n.querySelector(".js-merge-title"),g=n.querySelector(".js-merge-message");c.defaultValue===c.value&&(c.defaultValue=c.value=e.getAttribute("data-input-title-value")),g.defaultValue===g.value&&(g.defaultValue=g.value=e.getAttribute("data-input-message-value")),n.classList.toggle("is-merging",e.value==="merge"),n.classList.toggle("is-squashing",e.value==="squash"),n.classList.toggle("is-rebasing",e.value==="rebase"),n.classList.toggle("is-merging-group",e.value==="group"),n.classList.toggle("is-merging-solo",e.value==="solo"),n.classList.toggle("is-merging-jump",e.value==="jump");const P=s.classList.contains("js-admin-override-merge")&&e.value==="merge"||s.classList.contains("js-admin-override-squash")&&e.value==="squash"||s.classList.contains("js-admin-override-rebase")&&e.value==="rebase",D=n.querySelector(".js-merge-type");D&&(D.value=e.value);const C=n.querySelectorAll(".js-merge-pull-request .js-merge-commit-button");for(const J of C)J.type=e.value===J.value?"submit":"button";s.classList.toggle("color-fg-danger",P);const N=n.closest(".js-pull-merging"),U=new URL(N.getAttribute("data-url"),window.location.origin),Y=new URLSearchParams(U.search);Y.set("merge_type",e.value),U.search=Y.toString(),N.setAttribute("data-url",U.toString())}r(Jt,"updateForMergeMethod"),(0,f.on)("details:toggled",".js-merge-pr",function(t){const n=t.currentTarget.querySelector(".js-merge-message");n&&(0,f.f)(n,"change")}),(0,l.N7)(".branch-action-item.js-details-container.open",{add(t){for(const e of t.querySelectorAll(".js-merge-review-section"))e.setAttribute("open","")},remove(t){for(const e of t.querySelectorAll(".js-merge-review-section"))e.removeAttribute("open")}}),(0,f.on)("toggle",".js-details-container .js-merge-review-section",function({currentTarget:t}){const e=t.closest(".js-details-container"),n=e.querySelectorAll(".js-merge-review-section").length,s=e.querySelectorAll(".js-merge-review-section[open]").length;s===0?(0,we.Qp)(e,{force:!1}):s===n&&(0,we.Qp)(e,{force:!0})},{capture:!0}),(0,l.N7)("poll-include-fragment[data-to-be-polled]",{constructor:Xt.Z,add(t){function e(){t.src=t.getAttribute("data-to-be-polled"),t.removeAttribute("data-to-be-polled")}r(e,"onVisible"),document.hidden?document.addEventListener("visibilitychange",e,{once:!0}):e()}});var Me=d(84028);let ke=!1;document.addEventListener("keydown",function(t){t.key==="Alt"&&(ke=!0)}),document.addEventListener("keyup",function(t){t.key==="Alt"&&(ke=!1)}),(0,f.on)("click",".js-toggle-outdated-comments",function(t){if(!(t instanceof MouseEvent&&t.altKey||ke)||!(t.currentTarget instanceof HTMLElement))return;const e=t.currentTarget,n=e.closest("details");function s(){const o=n.hasAttribute("open");for(const i of document.querySelectorAll(".js-toggle-outdated-comments"))i!==e&&i.closest("details").toggleAttribute("open",o)}r(s,"toggleAll"),setTimeout(()=>{(0,Me.uQ)(e,s)})});function ot(){const t=document.querySelectorAll(".pull-request-ref-restore");for(let e=0;e<t.length;e++)t[e].classList.toggle("last",e===t.length-1)}r(ot,"syncLast"),(0,l.N7)(".pull-request-ref-restore",{add:ot,remove:ot});function it(){const t=document.querySelector("#js-pull-restorable")!=null,e=document.querySelector(".js-pull-discussion-timeline");e&&e.classList.toggle("is-pull-restorable",t)}r(it,"syncRestorable"),(0,l.N7)("#js-pull-restorable",{add:it,remove:it});var en=d(42650);function tn(t,e){const n=t.closest(".js-review-state-classes"),s=document.querySelector(".js-review-changes");n.classList.toggle("is-review-pending",e>0);for(const o of document.querySelectorAll(".js-pending-review-comment-count"))o.textContent=String(e);for(const o of document.querySelectorAll(".js-pending-comment-count-type"))o instanceof HTMLElement&&(o.textContent=o.getAttribute(e===1?"data-singular-string":"data-plural-string"));if(e>0){s.textContent=s.getAttribute("data-pending-message")||"";const o=t.querySelector(".js-reviews-toggle");o.classList.add("anim-pulse-in"),o.addEventListener("animationend",()=>o.classList.remove("anim-pulse-in"),{once:!0})}else s.textContent=s.getAttribute("data-message")||""}r(tn,"updatePendingCommentsCount");function rt(t){const e=document.querySelector(".js-reviews-container");e&&setTimeout(()=>tn(e,t))}r(rt,"updatePendingHandler"),(0,T.AC)(".js-inline-comment-form",async function(t,e){const n=await e.text();rt(n.json.pendingReviewCommentsCount)}),(0,T.AC)(".js-pending-review-comment .js-comment-delete",async function(t,e){const n=await e.text();rt(n.json.pendingReviewCommentsCount)}),(0,T.AC)(".js-resolvable-timeline-thread-form",async function(t,e){try{const n=await e.html();t.closest(".js-resolvable-timeline-thread-container").replaceWith(n.html)}catch{(0,en.v)()}}),(0,f.on)("click",".js-resolvable-thread-toggler",function(t){t.target instanceof HTMLElement&&ct(t.target)}),(0,T.AC)(".js-toggle-user-reviewed-file-form",async function(t,e){const n=t.closest(".js-details-container"),s=!!n.querySelector(".js-reviewed-file"),o=n.classList.contains("open"),i=n.querySelector(".js-file-header"),c=i?i.getBoundingClientRect().top===60:!1;(!s&&o||s&&!o)&&((0,we.Qp)(n),c&&(0,E.zT)(n));const g=t.querySelector(".js-reviewed-toggle");s?(g.classList.remove("color-bg-accent","color-border-accent"),g.classList.add("color-fg-muted","color-border-default")):(g.classList.remove("color-fg-muted","color-border-default"),g.classList.add("color-bg-accent","color-border-accent"));const P=g.querySelector(".js-reviewed-checkbox");P.disabled=!0;const D=document.querySelector("progress-bar");D instanceof Ee&&(s?D.decrement():D.increment());const C=document.getElementById(`file-tree-item-${n.id}`);C&&C.toggleAttribute("data-file-user-viewed");const N=await e.html(),U=t.closest(".js-replace-file-header-review");U&&(U.replaceWith(N.html),n.toggleAttribute("data-file-user-viewed"))}),(0,j.Z)(()=>{const t=window.location.hash.slice(1);if(!t)return;const e=document.getElementById(t);if(!e)return;const n=e.closest(".js-resolvable-thread-contents");n!==null&&n.classList.contains("d-none")&&ct(e)});function ct(t){const e=t.closest(".js-resolvable-timeline-thread-container");e.querySelector(".js-resolvable-thread-toggler-container").classList.toggle("border-bottom"),e.querySelector(".js-resolvable-thread-contents").classList.toggle("d-none");for(const s of e.querySelectorAll(".js-resolvable-thread-toggler"))s.classList.toggle("d-none")}r(ct,"toggleResolvableThread");function Ie(t){return t.getAttribute("ratio").split("/")}r(Ie,"parseRatio");function lt(t){if(t){const[e,n]=Ie(t),s=parseInt(e)/parseInt(n),o=t.querySelector(".js-review-progress"),i=t.querySelector(".js-review-count");o instanceof HTMLElement&&i&&(o.style.width=`${s*100}%`,i.textContent=`${e} / ${n}`)}}r(lt,"refresh");class Ee extends HTMLElement{static get observedAttributes(){return["ratio"]}attributeChangedCallback(e){e==="ratio"&&lt(this)}connectedCallback(){lt(this)}increment(){const[e,n]=Ie(this),s=Math.min(parseInt(e)+1,parseInt(n));this.setAttribute("ratio",`${s}/${n}`)}decrement(){const[e,n]=Ie(this),s=Math.min(parseInt(e)-1,parseInt(n));this.setAttribute("ratio",`${s}/${n}`)}}r(Ee,"ProgressBarElement"),window.customElements.get("progress-bar")||(window.ProgressBarElement=Ee,window.customElements.define("progress-bar",Ee));var nn=d(2998),sn=d(4463),on=d(61257);document.addEventListener("pjax:end",function(){for(const t of document.querySelectorAll(".js-pull-refresh-on-pjax"))(0,on.x0)(t)}),(0,l.N7)(".js-updating-pull-request-commits-count",{add(t){const e=t.textContent,n=document.querySelectorAll(".js-updateable-pull-request-commits-count");for(const s of n)s.textContent=e}}),(async()=>{if(await nn.x,window.performance&&window.performance.navigation&&window.performance.navigation.type===window.performance.navigation.TYPE_RELOAD){const t=document.getElementById("js-report-pull-request-refresh");t&&(0,sn.Fk)(t)}})();var at=d(7358),rn=d(49938);function cn(t){const e=t.querySelector(".js-diff-entry-loader"),n=t.querySelector(".js-diff-placeholder"),s=t.querySelector("button.js-diff-load"),o=t.querySelector(".js-button-text");n.setAttribute("fill","url('#animated-diff-gradient')"),o.textContent=s.getAttribute("data-disable-with")||"",s.disabled=!0;const i=new URL(e.getAttribute("data-fragment-url")||"",window.location.origin);return e.src=i.toString(),e.data}r(cn,"expander_loadDiff");function Te(t){(0,we.O4)(t),(0,E.zT)(t)}r(Te,"scrollIntoView"),(0,j.Z)(r(function(){const e=ln(window.location.hash);!e||(0,be.Q)(document,e.hashFragment)&&!e.lastLine||Oe(e,0)},"handleHashChange"));function ln(t){if(!t)return;const e=(0,rn.s)(t);if(!e)return;const n=e[1],s=e[2],o=e[3],i=e[5],c=n+s+o,g=n+s;return{anchor:n,side:s,line:o,lastLine:i,hashFragment:c,partialHashFragment:g}}r(ln,"parseExpansion");async function Oe(t,e){const{anchor:n,side:s,line:o,lastLine:i,hashFragment:c,partialHashFragment:g}=t,P=(0,be.Q)(document,n);if(!P)return;const D=P.nextElementSibling;if(!D)return;const C=ft(D,s,o,i);if(!C.length){const J=(0,be.Q)(document,c);if(J){Te(J);return}const oe=D.querySelector(".js-diff-load-container");if(!oe)return;try{await cn(oe);const V=(0,be.Q)(document,c);V instanceof HTMLElement&&Te(V)}catch{Te(D)}return}await an(C,g);const N=1,U=(0,be.Q)(document,c);ft(D,s,o,i).length?Oe(t,e):U?Te(U):e<N&&Oe(t,e+1)}r(Oe,"findAndActivateExpander"),(0,f.on)("click",".js-expand",function(t){t.preventDefault(),dt(t.currentTarget)});function an(t,e){return Promise.all(t.map(n=>dt(n,e)))}r(an,"activateExpanders");async function dt(t,e){let n;if(e){const C=e.slice(-1)==="R"?"data-right-range":"data-left-range",N=t.getAttribute(C)||"",U=parseInt(N.split("-")[0],10);n=e+U}else n=t.hash.slice(1);const s=t.getAttribute("data-url"),o=new URL(s,window.location.origin),i=new URLSearchParams(o.search.slice(1));i.append("anchor",n),o.search=i.toString(),window.location.hash!==""&&window.history.replaceState(null,"","#");const c=await(0,h.a)(document,o.toString()),g=t.closest(".js-file");if(!g)return;const P=t.closest(".js-expandable-line"),D=ut(P,".file-diff-line");D?(0,Me.uQ)(D,()=>{P.replaceWith(c)}):P.replaceWith(c),(0,f.f)(g,"expander:expanded"),dn(g)}r(dt,"activateExpander");function ut(t,e){const n=t.nextElementSibling;return n instanceof HTMLElement&&n.matches(e)?n:null}r(ut,"expander_next");function ft(t,e,n,s){const o=parseInt(n,10),i=parseInt(s||"",10);return Array.from(t.querySelectorAll(".js-expand")).filter(c=>{const g=e==="R"?"data-right-range":"data-left-range",P=(c.getAttribute(g)||"").split("-"),D=parseInt(P[0],10),C=parseInt(P[1],10);return D<=o&&o<=C||o<=D&&C<=i?!0:D<=i&&i<=C})}r(ft,"findExpanders");function dn(t){const e=t.querySelector(".js-expand-full-wrapper");if(!e)return;Array.from(t.querySelectorAll(".js-expand")).length===0&&e.parentElement.removeChild(e)}r(dn,"removeExpandAllButton");async function un(t,e){const n=await self.fetch(e,{headers:{"Content-Type":"application/json",Accept:"application/json"}});if(!n.ok)throw new Error(`Request to blob_expand failed with status code ${n.status}`);return(0,at.t)((0,at.P)(t),n,!0),(await n.json()).map(o=>({...o,content:(0,p.r)(t,o.content)}))}r(un,"fetchManySafeDocumentFragments"),(0,f.on)("click",".js-expand-full",async t=>{t.preventDefault();const e=t.currentTarget,n=e.closest(".file"),s=e.getAttribute("data-url"),o=mn(n);if(o.length===0)return;const i=new URL(s,window.location.origin),c=new URLSearchParams(i.search.slice(1));for(const C of o)c.append("ranges[]last_left",C.left.start),c.append("ranges[]left",C.left.end),c.append("ranges[]left_hunk_size",C.left.size),c.append("ranges[]last_right",C.right.start),c.append("ranges[]right",C.right.end),c.append("ranges[]right_hunk_size",C.right.size),c.append("ranges[]position",C.position);i.search=c.toString();const g=await un(document,i.toString()),P=[...n.querySelectorAll(".js-expand")];for(const{content:C,position:N}of g){const U=parseInt(N,10),Y=P[U];if(!Y)return;const J=Y.closest(".js-expandable-line"),oe=ut(J,".file-diff-line");oe?(0,Me.uQ)(oe,()=>{J.after(C)}):J.after(C),J.setAttribute("hidden","true")}e.setAttribute("hidden","true");const D=n.querySelector(".js-collapse-diff");D&&D.removeAttribute("hidden"),n.classList.add("open"),n.classList.add("Details--on")}),(0,f.on)("click",".js-collapse-diff",t=>{const e=t.currentTarget,n=e.closest(".file"),s=[...n.querySelectorAll('.blob-expanded[data-expanded-full="true"]')];for(const c of s)c.parentElement.removeChild(c);const o=[...n.querySelectorAll(".js-expandable-line")];for(const c of o)c.removeAttribute("hidden");e.setAttribute("hidden","true");const i=n.querySelector(".js-expand-full");i&&i.removeAttribute("hidden")});function fn(t,e){const s=new URL(t.getAttribute("data-url"),window.location.origin).searchParams;return{position:e.toString(),left:{start:s.get("last_left"),end:s.get("left"),size:s.get("left_hunk_size")},right:{start:s.get("last_right"),end:s.get("right"),size:s.get("right_hunk_size")}}}r(fn,"getExpanderRange");function mn(t){const n=Array.from(t.querySelectorAll(".js-expand")).map((i,c)=>fn(i,c));let s=!1;const o=[];for(let i=0;i<n.length;i++){if(s){s=!1;continue}const c=n[i],g=n[i+1];s=g&&c.left.start===g.left.start&&c.left.end===g.left.end&&c.right.start===g.right.start&&c.right.end===g.right.end,o.push(c)}return o}r(mn,"getAllHunkRanges");class Ce{constructor(e){this.selection=e,this.anchorNode=e.anchorNode}range(){var e;let n;return((e=this.selection)==null?void 0:e.rangeCount)>0&&(n=this.selection.getRangeAt(0)),n}canBeSideProtected(){try{return!!(this.hasSelectedText()&&this.confinedTable())}catch{return!1}}isSideProtected(){var e;try{return!!((e=this.confinedTable())==null?void 0:e.getAttribute("data-lock-side-selection"))}catch{return!1}}hasSelectedText(){const e=this.range();return e?e.toString().length>0:!1}clearSelectedText(){this.selection.removeAllRanges()}confinedTable(){var e,n;const s=(n=(e=this.range())==null?void 0:e.commonAncestorContainer)==null?void 0:n.parentElement;return(s==null?void 0:s.matches(".diff-table"))?s:(s==null?void 0:s.matches(".js-file-content"))?s==null?void 0:s.querySelector("table.diff-table"):s==null?void 0:s.closest("table.diff-table")}unprotectedSide(){var e,n;let s;return this.anchorNode instanceof HTMLTableCellElement?s=this.anchorNode.closest("td[data-split-side]"):s=(n=(e=this.anchorNode)==null?void 0:e.parentElement)==null?void 0:n.closest("td[data-split-side]"),s==null?void 0:s.getAttribute("data-split-side")}protectedSide(){return this.unprotectedSide()==="left"?"right":"left"}applySideProtection(){if(this.unprotectedSide()){const e=this.confinedTable(),n=this.unprotectedSide();e&&n&&e.setAttribute("data-lock-side-selection",n)}}clearSideProtection(){const e=document.querySelectorAll("table[data-lock-side-selection]");for(const n of e)n.removeAttribute("data-lock-side-selection")}filteredTableRows(){const e=[];for(let n=0;n<this.selection.rangeCount;n++){const o=this.selection.getRangeAt(n).cloneContents();if(o.querySelectorAll("td").length){const i=`td[data-split-side=${this.protectedSide()}], td.js-linkable-line-number, td.empty-cell`,c=o.querySelectorAll(i);for(const g of c)g.parentNode&&g.parentNode.removeChild(g);e.push(...o.children)}else{const i=document.createElement("TR"),c=document.createElement("TD");c.append(...o.childNodes),i.append(c),e.push(i)}}return e}contentToString(){var e;const n=[],s=document.createElement("table");s.classList.add("invisible"),s.append(...this.filteredTableRows()),(e=this.confinedTable())==null||e.append(s);const o=s.children;for(let i=0;i<o.length;i++){const g=o[i].innerText;g&&(g===`
`?n.push(""):n.push(g))}return s.remove(),n.join(`
`)}}r(Ce,"DiffTableSideProtection");function mt(t){return Math.floor(t/2)}r(mt,"tableSide");function _e(t,e){const n=t.parentElement;if(!n)return;const s=n.children;let o;if(s.length===4)for(let i=0,c=s.length;i<c;i++)s[i]===t&&(o=mt(i));for(let i=0,c=s.length;i<c;i++){const g=s[i];(o==null||mt(i)===o)&&g.classList.toggle("is-hovered",e)}}r(_e,"onHover"),(0,l.N7)(".diff-table",function(t){let e=null;function n(){e&&_e(e,!1),e=null}r(n,"onMouseEnter");function s(c){e&&_e(e,!1),c.target instanceof HTMLElement&&(e=c.target.closest("td.blob-code"),e&&_e(e,!0))}r(s,"onMouseOver");function o(){t.addEventListener("mouseenter",n),t.addEventListener("mouseleave",n),t.addEventListener("mouseover",s)}r(o,"add");function i(){t.removeEventListener("mouseenter",n),t.removeEventListener("mouseleave",n),t.removeEventListener("mouseover",s)}return r(i,"remove"),{add:o,remove:i}});function gt(t){var e;const n=document.getSelection();if(n){const s=new Ce(n);s.isSideProtected()&&((e=t.clipboardData)==null||e.setData("text/plain",s.contentToString()),t.preventDefault())}}r(gt,"copySidedContent");function ht(t){const e=document.getSelection(),n=t.button===2;if(e&&!n){const s=new Ce(e);s.isSideProtected()&&(s.clearSelectedText(),s.clearSideProtection())}}r(ht,"clearSidedProtection");function pt(){const t=document.getSelection();if(t){const e=new Ce(t);e.canBeSideProtected()?e.applySideProtection():e.clearSideProtection()}}r(pt,"protectSidedContent"),(0,l.N7)(".js-diff-container",function(){function t(){document.addEventListener("copy",gt),document.addEventListener("mousedown",ht),document.addEventListener("selectionchange",pt)}r(t,"add");function e(){document.removeEventListener("copy",gt),document.removeEventListener("mousedown",ht),document.removeEventListener("selectionchange",pt)}return r(e,"remove"),{add:t,remove:e}});var An=d(58561);function ge(){const t=document.querySelector("meta[name=diff-view]"),e=t&&t instanceof HTMLMetaElement?t.content:"",n=document.querySelector(".js-file-diff-split"),s=!!(e==="split"&&n||document.querySelector(".wants-full-width-container"));document.body.classList.toggle("full-width",s)}r(ge,"syncBodyClass"),(0,l.N7)("meta[name=diff-view]",{add:ge,remove:ge}),(0,l.N7)(".js-file-diff-split",{add:ge,remove:ge}),(0,l.N7)(".js-compare-tab.selected",{add:ge,remove:ge}),(0,l.N7)(".wants-full-width-container",{add:ge,remove:ge}),(0,f.on)("change",".js-toggle-file-notes",function(t){const e=t.currentTarget;e.closest(".file").classList.toggle("show-inline-notes",e.checked)});function bt(t){const e=t.some(n=>n.checked);for(const n of t)(0,te.Se)(n,!e)}r(bt,"toggleCheckboxes"),(0,f.on)("click",".js-toggle-all-file-notes",function(t){const e=Array.from(document.querySelectorAll(".js-toggle-file-notes"));bt(e),t.preventDefault()}),(0,f.on)("click",".js-toggle-all-file-annotations",function(t){const e=Array.from(document.querySelectorAll(".js-toggle-file-check-annotations"));bt(e),t.preventDefault()}),(0,l.N7)(".js-inline-comments-container",function(t){let e;const n=t.closest(".file");if(n)return{add:e=r(function(){const o=n.querySelector(".js-inline-comments-container")!=null;n.classList.toggle("has-inline-notes",o)},"remove"),remove:e}}),(0,f.on)("change",".js-toggle-file-check-annotations",function(t){const e=t.currentTarget,n=e.closest(".file").querySelectorAll(".js-inline-annotations");for(const s of n)s instanceof HTMLElement&&(s.hidden=!e.checked)});function yt(t){const e=t.parentElement,n=e.querySelectorAll("td.js-line-comments").length,s=e.querySelectorAll("td.js-line-comments.is-collapsed").length;e.classList.toggle("is-collapsed",s>0&&n===s)}r(yt,"updateRow"),(0,l.N7)("td.js-line-comments.is-collapsed",{add:yt,remove:yt});var gn=d(13802),hn=Object.defineProperty,pn=Object.getOwnPropertyDescriptor,he=r((t,e,n,s)=>{for(var o=s>1?void 0:s?pn(e,n):e,i=t.length-1,c;i>=0;i--)(c=t[i])&&(o=(s?c(e,n,o):c(o))||o);return s&&o&&hn(e,n,o),o},"diff_file_filter_element_decorateClass");let fe=r(class extends HTMLElement{connectedCallback(){this.filterState={hideDeletedFiles:!1,hideViewedFiles:!1,showManifestFilesOnly:!1,selectedOwners:[],showCodeownersFiles:!1,selectedFileTypes:[],fileTypeFilterActive:!1,filtersActive:!1}}applyFilter(t){this.filterState=t.detail,this.showResetFilters(),this.filterFiles(),this.filterTreeFiles(),this.hideEmptyDirectories(),this.showBlankslateIfEmpty()}filterFiles(){for(const t of this.diffEntries){const e=t.closest(".js-file.js-details-container");e.hidden=!this.shouldShowFile(t)}}filterTreeFiles(){for(const t of this.treeEntries){const e=this.shouldShowFile(t);t.hidden=!e,t.toggleAttribute("data-skip-substring-filter",!e)}}hideEmptyDirectories(){this.treeRoot&&this.hideEmptyDirectory(this.treeRoot)}hideEmptyDirectory(t){const e=t.getAttribute("data-tree-entry-type")==="root",n=t.getAttribute("data-tree-entry-type")==="directory";if(e||n){const s=t.querySelectorAll(e?":scope > .js-tree-node":":scope > ul > .js-tree-node");let o=0;for(const i of s)o=o+this.hideEmptyDirectory(i);return o===0?(t.hidden=!0,0):(t.hidden=!1,1)}return t.hidden?0:1}async refilterAfterAsyncLoad(){await Promise.resolve(),this.refilterLoadedFiles(),this.showBlankslateIfEmpty()}refilterLoadedFiles(){this.filterState.filtersActive&&this.filterFiles()}shouldShowFile(t){let e=!0;const n=t.getAttribute("data-file-type");return n&&(e=this.filterState.selectedFileTypes.includes(n)),this.filterState.hideViewedFiles&&e&&t.hasAttribute("data-file-user-viewed")&&(e=!1),this.filterState.showCodeownersFiles&&e&&(e=(t.getAttribute("data-codeowners")||"").split(",").filter(o=>this.filterState.selectedOwners.includes(o)).length>0),this.filterState.hideDeletedFiles&&e&&t.getAttribute("data-file-deleted")==="true"&&(e=!1),this.filterState.showManifestFilesOnly&&e&&(t.hasAttribute("data-file-manifest")||(e=!1)),e}showResetFilters(){this.resetFilters&&(this.resetFilters.hidden=!this.filterState.filtersActive)}showBlankslateIfEmpty(){if(!this.blankslate)return;if(this.progressiveLoaders.length>0){this.blankslate.hidden=!0;return}if(this.diffEntries.length===0){this.blankslate.hidden=!0;return}const t=Array.from(this.diffEntries).some(e=>!e.hidden);this.blankslate.hidden=t}},"DiffFileFilterElement");he([re.fA],fe.prototype,"blankslate",2),he([re.fA],fe.prototype,"resetFilters",2),he([re.GO],fe.prototype,"diffEntries",2),he([re.GO],fe.prototype,"progressiveLoaders",2),he([re.GO],fe.prototype,"treeEntries",2),he([re.fA],fe.prototype,"treeRoot",2),he([(0,gn.D)(20)],fe.prototype,"hideEmptyDirectories",1),fe=he([re.Ih],fe);var bn=d(18137),yn=Object.defineProperty,vn=Object.getOwnPropertyDescriptor,Sn=r((t,e,n,s)=>{for(var o=s>1?void 0:s?vn(e,n):e,i=t.length-1,c;i>=0;i--)(c=t[i])&&(o=(s?c(e,n,o):c(o))||o);return s&&o&&yn(e,n,o),o},"input_demux_context_wrapper_decorateClass");class vt{onItemSelected(e){if(!(e.currentTarget instanceof HTMLButtonElement))return;const n=e.currentTarget.querySelector(".js-ref-name").textContent,s=document.querySelector(".js-new-base-branch");s.value=btoa(n||"");const o=document.querySelector(".js-change-base-template").content.cloneNode(!0);o instanceof DocumentFragment&&(0,bn.W)({content:o})}}r(vt,"InputDemuxBaseChangeContext");let St=r(class extends HTMLElement{connectedCallback(){const t=this.getAttribute("data-context-type"),e={baseChange:new vt};this.context=e[t]}onItemSelected(t){this.context.onItemSelected(t)}},"InputDemuxContextWrapperElement");St=Sn([re.Ih],St);var En=d(88434),Tn=d(35018),Cn=d(19364)},99481:(Z,H,d)=>{d.d(H,{O4:()=>B,jo:()=>R,Qp:()=>b});var f=d(47789),E=d(11427);const A="ontransitionend"in window;function O(w,_){if(!A){_();return}const $=Array.from(w.querySelectorAll(".js-transitionable"));w.classList.contains("js-transitionable")&&$.push(w);for(const I of $){const ee=j(I);I instanceof HTMLElement&&(I.addEventListener("transitionend",()=>{I.style.display="",I.style.visibility="",ee&&l(I,function(){I.style.height=""})},{once:!0}),I.style.boxSizing="content-box",I.style.display="block",I.style.visibility="visible",ee&&l(I,function(){I.style.height=getComputedStyle(I).height}),I.offsetHeight)}_();for(const I of $)if(I instanceof HTMLElement&&j(I)){const ee=getComputedStyle(I).height;I.style.boxSizing="",ee==="0px"?I.style.height=`${I.scrollHeight}px`:I.style.height="0px"}}r(O,"performTransition");function j(w){return getComputedStyle(w).transitionProperty==="height"}r(j,"isTransitioningHeight");function l(w,_){w.style.transition="none",_(),w.offsetHeight,w.style.transition=""}r(l,"withoutTransition");var S=d(84028);function y(w,_){_.find($=>{const I=w.querySelectorAll($),ee=I[I.length-1];if(ee&&document.activeElement!==ee)return ee.focus(),!0})}r(y,"findAndFocusByQuerySelector");function a(w){y(w,[".js-focus-on-dismiss","input[autofocus], textarea[autofocus]"])}r(a,"restoreAutofocus");function u(w){!w.classList.contains("tooltipped")||(w.classList.remove("tooltipped"),w.addEventListener("mouseleave",()=>{w.classList.add("tooltipped"),w.blur()},{once:!0}))}r(u,"hideTooltip");function m(w){return[...document.querySelectorAll(".js-details-container")].filter(_=>_.getAttribute("data-details-container-group")===w)}r(m,"groupMembers");function L(w){return[...w.querySelectorAll(".js-details-target")].filter(_=>_.closest(".js-details-container")===w)}r(L,"containerTargets");function x(w,_){const $=w.getAttribute("data-details-container-group");return $?((0,S.uQ)(w,()=>{for(const I of m($))I!==w&&M(I,_)}),$):null}r(x,"toggleGroup");function M(w,_){w.classList.toggle("open",_),w.classList.toggle("Details--on",_);for(const $ of L(w))$.setAttribute("aria-expanded",_.toString())}r(M,"updateOpenState");function b(w,_){var $,I;const ee=w.getAttribute("data-details-container")||".js-details-container",ne=w.closest(ee),se=($=_==null?void 0:_.force)!=null?$:!ne.classList.contains("open"),le=(I=_==null?void 0:_.withGroup)!=null?I:!1;O(ne,()=>{M(ne,se);const v=le?x(ne,se):null;Promise.resolve().then(()=>{a(ne),u(w),ne.dispatchEvent(new CustomEvent("details:toggled",{bubbles:!0,cancelable:!1,detail:{open:se}})),v&&ne.dispatchEvent(new CustomEvent("details:toggled-group",{bubbles:!0,cancelable:!1,detail:{open:se,group:v}}))})})}r(b,"toggleDetailsTarget");function R(w){const _=w.getAttribute("data-details-container")||".js-details-container",I=w.closest(_).classList;return I.contains("Details--on")||I.contains("open")}r(R,"isDetailsTargetExpanded");function q(w){const _=w.altKey,$=w.currentTarget;b($,{withGroup:_}),w.preventDefault()}r(q,"handleDetailsTargetClick"),(0,E.on)("click",".js-details-target",q),(0,f.Z)(function({target:w}){w&&B(w)});function B(w){let _=!1,$=w.parentElement;for(;$;)$.classList.contains("Details-content--shown")&&(_=!0),$.classList.contains("js-details-container")&&($.classList.toggle("open",!_),$.classList.toggle("Details--on",!_),_=!1),$=$.parentElement}r(B,"ensureExpanded")},47789:(Z,H,d)=>{d.d(H,{Z:()=>O});var f=d(2998);const E=[];let A=0;function O(a){(async function(){E.push(a),await f.x,j()})()}r(O,"hashChange"),O.clear=()=>{E.length=A=0};function j(){const a=A;A=E.length,l(E.slice(a),null,window.location.href)}r(j,"runRemainingHandlers");function l(a,u,m){const L=window.location.hash.slice(1),x=L?document.getElementById(L):null,M={oldURL:u,newURL:m,target:x};for(const b of a)b.call(null,M)}r(l,"runHandlers");let S=window.location.href;window.addEventListener("popstate",function(){S=window.location.href}),window.addEventListener("hashchange",function(a){const u=window.location.href;try{l(E,a.oldURL||S,u)}finally{S=u}});let y=null;document.addEventListener("pjax:start",function(){y=window.location.href}),document.addEventListener("pjax:end",function(){l(E,y,window.location.href)})},57147:(Z,H,d)=>{d.d(H,{h:()=>E});var f=d(11427);(0,f.on)("click",".js-skip-to-content",function(y){const a=document.getElementById("start-of-content");if(a){const u=a.nextElementSibling;u instanceof HTMLElement&&(u.setAttribute("tabindex","-1"),u.setAttribute("data-skipped-to-content","1"),u.focus())}y.preventDefault()});function E(){let y=!1;const a=document.getElementById("start-of-content");if(a){const u=a.nextElementSibling;if(u instanceof HTMLElement)return y=u.getAttribute("data-skipped-to-content")==="1",y&&u.removeAttribute("data-skipped-to-content"),y}}r(E,"hasSkippedToContent");const A="ontouchstart"in document;function O(){return window.innerWidth>1012}r(O,"compatibleDesktop");for(const y of document.querySelectorAll(".HeaderMenu-details"))y.addEventListener("toggle",l),A||(y.addEventListener("mouseover",S),y.addEventListener("mouseleave",S));let j=!1;function l(y){if(!j){j=!0;for(const a of document.querySelectorAll(".HeaderMenu-details"))a!==y.currentTarget&&a.removeAttribute("open");setTimeout(()=>j=!1)}}r(l,"onMenuToggle");function S(y){const{currentTarget:a}=y;!(a instanceof HTMLElement)||!O()||(y.type==="mouseover"&&y instanceof MouseEvent?y.target instanceof Node&&y.relatedTarget instanceof Node&&a.contains(y.target)&&!a.contains(y.relatedTarget)&&a.setAttribute("open",""):a.removeAttribute("open"))}r(S,"onMenuHover")},61124:(Z,H,d)=>{d.d(H,{$:()=>y,G:()=>S});var f=d(27157),E=d(30762),A=d(11427);(0,E.N7)("include-fragment, poll-include-fragment",{subscribe:u=>(0,f.qC)((0,f.RB)(u,"error",l),(0,f.RB)(u,"loadstart",j))}),(0,A.on)("click","include-fragment button[data-retry-button]",({currentTarget:u})=>{const m=u.closest("include-fragment"),L=m.src;m.src="",m.src=L});function O(u,m){const L=u.currentTarget;if(L instanceof Element){for(const x of L.querySelectorAll("[data-show-on-error]"))x instanceof HTMLElement&&(x.hidden=!m);for(const x of L.querySelectorAll("[data-hide-on-error]"))x instanceof HTMLElement&&(x.hidden=m)}}r(O,"toggleElements");function j(u){O(u,!1)}r(j,"onLoad");function l(u){O(u,!0)}r(l,"onError");function S({currentTarget:u}){u instanceof Element&&y(u)}r(S,"loadDeferredContentByEvent");function y(u){const m=u.closest("details");m&&a(m)}r(y,"loadDeferredContent");function a(u){const m=u.getAttribute("data-deferred-details-content-url");if(m){u.removeAttribute("data-deferred-details-content-url");const L=u.querySelector("include-fragment, poll-include-fragment");L&&(L.src=m)}}r(a,"setIncludeFragmentSrc")},13717:(Z,H,d)=>{d.d(H,{j:()=>O,w:()=>j});var f=d(11427),E=d(36805),A=d(66123);(0,f.on)("click",".js-toggle-inline-comment-form",function(l){const S=l.currentTarget.closest(".js-line-comments");O(S)}),(0,f.on)("quote-selection",".js-line-comments",function(l){O(l.currentTarget)}),(0,A.w4)("keydown",".js-inline-comment-form-container form .js-comment-field",function(l){const S=l.target;if(!S.classList.contains("js-navigation-enable")&&l.key==="Escape"&&S.value.length===0){const y=S.closest("form");j(y),l.preventDefault()}}),(0,f.on)("click",".js-hide-inline-comment-form",function(l){const S=l.currentTarget.closest("form");!(0,E.T)(S)||confirm(l.target.getAttribute("data-confirm-cancel-text"))?j(S):l.preventDefault()});function O(l){var S;const y=l.querySelector(".js-inline-comment-form-container");y.classList.add("open"),(S=y.querySelector(".js-write-tab"))==null||S.click(),y.querySelector(".js-comment-field").focus(),(0,f.f)(y,"inlinecomment:focus")}r(O,"focusForm");function j(l){l.reset();const S=l.closest(".js-inline-comment-form-container");S.classList.remove("open");const y=S.querySelector(".js-multi-line-preview");y&&(y.hidden=!0),(0,f.f)(S,"inlinecomment:collapse")}r(j,"blurForm")},1868:(Z,H,d)=>{d.d(H,{H:()=>u});var f=d(57147),E=d(2998),A=d(30762);let O=!1,j=0;const l=[];function S(){l.length?y():a()}r(S,"manageObservers");function y(){O||(window.addEventListener("resize",m),document.addEventListener("scroll",m),O=!0)}r(y,"addObservers");function a(){window.removeEventListener("resize",m),document.removeEventListener("scroll",m),O=!1}r(a,"removeObservers");function u(){L(!0)}r(u,"forceStickyRelayout");function m(){L()}r(m,"checkElementsForStickingHandler");function L(v=!1){for(const k of l)if(k.element.offsetHeight>0){const{element:W,placeholder:te,top:h}=k,p=W.getBoundingClientRect();if(te){const T=te.getBoundingClientRect();W.classList.contains("is-stuck")?T.top>se(W,h)?b(k):R(k):p.top<=se(W,h)?M(k):v&&R(k)}else p.top-se(W,h)<.1?M(k):b(k)}}r(L,"checkElementsForSticking");function x(v){const{position:k}=window.getComputedStyle(v);return/sticky/.test(k)}r(x,"browserHasSticky");function M({element:v,placeholder:k,top:W}){if(k){const te=v.getBoundingClientRect();le(v,se(v,W)),v.style.left=`${te.left}px`,v.style.width=`${te.width}px`,v.style.marginTop="0",v.style.position="fixed",k.style.display="block"}v.classList.add("is-stuck")}r(M,"pinSet");function b({element:v,placeholder:k}){k&&(v.style.position="static",v.style.marginTop=k.style.marginTop,k.style.display="none"),v.classList.remove("is-stuck")}r(b,"unpinSet");function R({element:v,placeholder:k,offsetParent:W,top:te}){if(k&&!(0,f.h)()){const h=v.getBoundingClientRect(),p=k.getBoundingClientRect();if(le(v,se(v,te)),v.style.left=`${p.left}px`,v.style.width=`${p.width}px`,W){const T=W.getBoundingClientRect();T.bottom<h.height+parseInt(String(te))&&(v.style.top=`${T.bottom-h.height}px`)}}}r(R,"updatePinnedSet");function q(v){if(x(v))return null;const k=v.previousElementSibling;if(k&&k.classList.contains("is-placeholder"))return k;const W=document.createElement("div");return W.style.visibility="hidden",W.style.display="none",W.style.height=window.getComputedStyle(v).height,W.className=v.className,W.classList.remove("js-sticky"),W.classList.add("is-placeholder"),v.parentNode.insertBefore(W,v)}r(q,"findOrCreatePlaceholder");function B(v){const k=q(v),W=window.getComputedStyle(v).position;v.style.position="static";const te=v.offsetParent;v.style.position="fixed";const h=ne(v),p={element:v,placeholder:k,offsetParent:te,top:h==="auto"?0:parseInt(h||"0")};v.style.position=W,l.push(p)}r(B,"createSet");function w(v){const k=l.map(W=>W.element).indexOf(v);l.splice(k,1)}r(w,"removeSet");async function _(v){await E.C,B(v),L(),S()}r(_,"initializeSet"),(0,A.N7)(".js-sticky",{constructor:HTMLElement,add(v){_(v)},remove(v){w(v),S()}}),(0,A.N7)(".js-notification-top-shelf",{constructor:HTMLElement,add(v){$(v)},remove(){for(const v of document.querySelectorAll(".js-notification-top-shelf"))v.remove();j>0&&(j=0,I(),u())}}),(0,A.N7)(".js-notification-shelf-offset-top, .js-position-sticky",{constructor:HTMLElement,add:ee});async function $(v){if(v.offsetParent===null)return;await E.C;const k=Math.floor(v.getBoundingClientRect().height);k>0&&(j=k,I(),u())}r($,"initializeNotificationShelf");function I(){for(const v of document.querySelectorAll(".js-position-sticky, .js-notification-shelf-offset-top"))ee(v)}r(I,"updateTopOffsets");function ee(v){if(v.classList.contains("js-notification-top-shelf"))return;const k=parseInt(ne(v))||0;le(v,k+j)}r(ee,"updateTopOffset");function ne(v){const k=v.getAttribute("data-original-top");if(k!=null)return k;const W=window.getComputedStyle(v).top;return v.setAttribute("data-original-top",W),W}r(ne,"getOriginalTop");function se(v,k){return v.classList.contains("js-notification-top-shelf")?k:k+j}r(se,"withShelfOffset");function le(v,k){v.style.setProperty("top",`${k}px`,"important")}r(le,"setTopImportant")},18137:(Z,H,d)=>{d.d(H,{W:()=>E});var f=d(11427);async function E(A){const j=document.querySelector("#site-details-dialog").content.cloneNode(!0),l=j.querySelector("details"),S=l.querySelector("details-dialog"),y=l.querySelector(".js-details-dialog-spinner");A.detailsClass&&l.classList.add(...A.detailsClass.split(" ")),A.dialogClass&&S.classList.add(...A.dialogClass.split(" ")),A.label?S.setAttribute("aria-label",A.label):A.labelledBy&&S.setAttribute("aria-labelledby",A.labelledBy),document.body.append(j);const a=await A.content;return y.remove(),S.prepend(a),l.addEventListener("toggle",()=>{l.hasAttribute("open")||((0,f.f)(S,"dialog:remove"),l.remove())}),S}r(E,"dialog")},97424:(Z,H,d)=>{d.d(H,{X:()=>E});var f=d(68842);function E(A,O,j,l,S,y,a,u){const m=document.querySelector(".js-file-filter"),L=new URL(window.location.href,window.location.origin);if(!A&&!l)return O||y?void 0:(L.search="",(0,f.lO)((0,f.y0)(),"",L.toString()));const x=m.querySelector(".js-file-filter-form"),M=new FormData(x),b=j.filter(B=>!M.getAll("file-filters[]").includes(B)),R=S.filter(B=>!M.getAll("owned-by[]").includes(B));for(const B of b)M.append("file-filters[]",B);for(const B of R)M.append("owned-by[]",B);const q=new URLSearchParams(M);(!q.has("file-filters[]")||q.toString()==="")&&q.set("file-filters[]",""),O&&q.set("w","1"),y&&q.set("manifests","true"),a&&q.set("show-deleted-files","false"),u&&q.set("show-viewed-files","false"),q.delete("authenticity_token"),L.search=q.toString(),(0,f.lO)((0,f.y0)(),"",L.toString())}r(E,"updateURLState")},49938:(Z,H,d)=>{d.d(H,{s:()=>f});function f(E){const A=E.match(/^#?(diff-[a-f0-9]+)(L|R)(\d+)(?:-(L|R)(\d+))?$/i);if(A!=null&&A.length===6)return A;const O=E.match(/^#?(discussion-diff-[0-9]+)(L|R)(\d+)(?:-(L|R)(\d+))?$/i);return O!=null&&O.length===6?O:null}r(f,"matchHash")},23343:(Z,H,d)=>{d.d(H,{MO:()=>q,vu:()=>x,Oz:()=>b});var f=d(67647);class E{constructor(p,T,F){this.diffId=p,this.side=T,this.lineNumber=F,this.element=(0,f.Q)(document,this.anchor())}sideForCommenting(){return this.element&&this.element.classList.contains("blob-num-context")?"right":{R:"right",L:"left"}[this.side]}isContext(){return this.element?this.element.classList.contains("blob-num-context"):!1}anchor(){return`${this.diffId}${this.anchorSuffix()}`}anchorSuffix(){return`${this.side}${this.lineNumber}`}is(p){return this.diffId===p.diffId&&this.side===p.side&&this.lineNumber===p.lineNumber}}r(E,"DiffPosition");class A{constructor(p,T,F,Q,z){this.elements=new Set,this.isParsed=!1,this.isSplit=!1,this._rows=new Set,this._isAcrossHunks=!1,this._isContextOnly=!0,this._includesExpandedLine=!1,this._commentOutsideTheDiff=!1,this.diffId=p,this.diffTable=document.querySelector(`.js-diff-table[data-diff-anchor="${p}"]`),this.diffTable&&(this.isSplit=this.diffTable.classList.contains("js-file-diff-split")),this.start=new E(p,T,F),this.end=new E(p,Q,z),this.lineCount=0,this.parse()}anchor(){const p=[];return p.push(this.start.anchor()),this.start.is(this.end)||p.push(this.end.anchorSuffix()),p.join("-")}parse(){if(!this.diffTable)return;let p=this.unify(this.diffTable.querySelectorAll(".js-linkable-line-number"));p=this.filterInRange(p),this.lineCount=p.length,this.elements=this.expandRelatedElements(p),this._commentOutsideTheDiff=this.diffTable.classList.contains("js-comment-outside-the-diff"),this.isParsed=!0}unify(p){if(!this.isSplit)return Array.from(p);const T=[];let F=[],Q=[];for(const z of p)z.classList.contains("blob-num-addition")?F.push(z):z.classList.contains("blob-num-deletion")?Q.push(z):(T.push(...Q,...F,z),F=[],Q=[]);return T.push(...Q,...F),T}filterInRange(p){if(!this.start.element||!this.end.element)return[];let T=p.indexOf(this.start.element),F=p.indexOf(this.end.element);if(T>F){[T,F]=[F,T];const[Q,z]=[this.end,this.start];this.start=Q,this.end=z}return p.slice(T,F+1)}isContextOnly(){return this.isParsed||this.parse(),this._isContextOnly}isAcrossHunks(){return this.isParsed||this.parse(),this._isAcrossHunks}includesExpandedLine(){return this.isParsed||this.parse(),this._includesExpandedLine}commentOutsideTheDiffEnabled(){return this.isParsed||this.parse(),this._commentOutsideTheDiff}rows(){return this.isParsed||this.parse(),this._rows}expandRelatedElements(p){const T=this.isSplit,F=p[0],Q=p[p.length-1];if(F&&Q){const X=F.closest("[data-hunk]"),K=Q.closest("[data-hunk]");if(X&&K){const G=X.getAttribute("data-hunk"),ce=K.getAttribute("data-hunk");G!==ce&&(this._isAcrossHunks=!0)}}const z=r((X,K)=>{!this._includesExpandedLine&&K.closest(".blob-expanded")&&(this._includesExpandedLine=!0);const G=K.parentElement;G instanceof HTMLElement&&this._rows.add(G);const ce=K.classList.contains("blob-num-deletion")||K.classList.contains("blob-num-addition");if(ce&&(this._isContextOnly=!1),!G)return X;if(T&&ce)return Array.from(G.children).indexOf(K)<2?X.add(G.children[0]).add(G.children[1]):X.add(G.children[2]).add(G.children[3]);for(const ue of Array.from(G.children))X.add(ue);return X},"expander");return p.reduce(z,new Set)}}r(A,"DiffRange");var O=d(47789),j=d(49938),l=d(30762),S=d(11427),y=d(4463);let a=null,u=null,m=!1,L=null;function x(){return a}r(x,"getCurrentRange");function M(h){return!!h.closest(".js-multi-line-comments-enabled")}r(M,"isMultiLineCommentingEnabled");function b(h,p){if(!M(h))return!1;const{start:{lineNumber:T},end:{lineNumber:F}}=p;return!(T===F&&p.isContextOnly()||!p.commentOutsideTheDiffEnabled()&&(p.isAcrossHunks()||p.includesExpandedLine()))}r(b,"isMultiLineCommentAllowed");function R(h){return h.closest(".js-diff-table").classList.contains("is-selecting")}r(R,"isSelecting");function q(){window.history.replaceState(null,"","#"),W()}r(q,"clearSelection");function B(h,p){let T=h.id;if(p){const F=(0,j.s)(T);if(!F)return;const Q=F[1],z=F[2],X=F[3];if(a&&a.diffId===Q){if(z===a.start.side&&X<a.start.lineNumber)return;const K=new A(Q,a.start.side,a.start.lineNumber,z,+X);T=K.anchor();const G=h.closest(".js-file-content[data-hydro-view]");G instanceof HTMLElement&&te(G,K),m&&R(h)&&h.closest(".js-diff-table").classList.toggle("is-commenting",b(h,K)),u=r(function(){if(b(h,K)){const ue=`.js-add-line-comment[data-side="${K.end.sideForCommenting()}"]`,Le=h.closest("tr").querySelector(ue);Le&&K&&Le.click()}},"showMultiLineCommentForm")}}window.history.replaceState(null,null,`#${T}`),W()}r(B,"setSelection");function w(h){if(!(h instanceof HTMLElement))return null;if(h.classList.contains("js-linkable-line-number"))return h;const p=h.previousElementSibling;return p?w(p):null}r(w,"nearestLinkableLineNumber");function _(h){!a||h.target.closest(".js-diff-table")||(window.history.replaceState(null,null,"#"),W())}r(_,"handleClick");function $(){if(!L)return;B(L,!1);const h=L.closest(".js-diff-table");L=null,h.classList.add("is-selecting"),h.classList.add("is-commenting"),document.addEventListener("mouseup",function(p){h.classList.remove("is-selecting"),h.classList.remove("is-selecting","is-commenting"),u&&u(),u=null,le(h),p.preventDefault()},{once:!0})}r($,"beginDrag");function I(h){const p=w(h);!p||!R(p)||B(p,!0)}r(I,"commentSelectionMouseverToCode");function ee(h){!R(h)||B(h,!0)}r(ee,"commentSelectionMouseverToLineNumbers");function ne(h){const p=h.target;if(!(p instanceof Element))return;L&&$();const T=p.closest(".blob-code, .js-linkable-line-number");if(!!T){if(T.classList.contains("blob-code"))return I(T);T.classList.contains("js-linkable-line-number")&&ee(T)}}r(ne,"handleDragMouseEvent");function se(h){h.addEventListener("mouseenter",ne,{capture:!0})}r(se,"addCommentSelectionEvents");function le(h){m=!1,h.removeEventListener("mouseenter",ne,{capture:!0}),setTimeout(()=>{document.addEventListener("click",_,{once:!0})},0)}r(le,"removeCommentSelectionEvents"),(0,S.on)("mousedown",".js-add-line-comment",function(h){if(!(h instanceof MouseEvent)||h.button!==0)return;const p=h.target.parentElement;if(!p||!M(h.target))return;const T=w(p);if(!T)return;const F=h.target.closest(".js-diff-table");se(F),L=T,m=!0,h.target.addEventListener("mouseup",function(){le(F),L=null,m=!1},{once:!0}),a&&a.lineCount>1&&h.preventDefault()}),(0,S.on)("mousedown",".js-linkable-line-number",function(h){if(!(h instanceof MouseEvent)||h.button!==0)return;const p=h.target;if(!(p instanceof Element))return;const T=p.closest(".js-diff-table");T.classList.add("is-selecting"),se(T),document.addEventListener("mouseup",function(){p.closest(".js-diff-table").classList.remove("is-selecting"),le(T)},{once:!0}),B(p,h instanceof MouseEvent&&h.shiftKey),h.preventDefault()});function v(){if(!a)return;for(const z of a.elements)z.classList.add("selected-line");const h=[],p=[],T=[],F=[];for(const z of a.rows()){const[X,K,G,ce]=z.children;h.push(X),p.push(K),T.push(G),F.push(ce)}function Q(z){for(const[X,K]of z.entries()){if(K.classList.contains("empty-cell"))continue;const G=z[X-1];(!G||!G.classList.contains("selected-line"))&&K.classList.add("selected-line-top");const ce=z[X+1];(!ce||!ce.classList.contains("selected-line"))&&K.classList.add("selected-line-bottom")}}r(Q,"doBorder"),Q(h),Q(p),Q(T),Q(F);for(const[z,X]of p.entries())F[z].classList.contains("selected-line")||X.classList.add("selected-line-right");for(const[z,X]of T.entries())p[z].classList.contains("selected-line")||X.classList.add("selected-line-left")}r(v,"drawBorderForSplit");function k(){if(!a)return;for(const F of a.elements)F.classList.add("selected-line");const h=Array.from(a.rows()),p=h[0];for(const F of p.children)F.classList.add("selected-line-top");const T=h[h.length-1];for(const F of T.children)F.classList.add("selected-line-bottom")}r(k,"drawBorderForUnified");function W(){if(a){for(const G of a.elements)G.classList.remove("selected-line","selected-line-top","selected-line-bottom","selected-line-left","selected-line-right");a=null}const h=(0,j.s)(window.location.hash);if(!h)return;const p=h[1],T=h[2],F=h[3],Q=h[4]||T,z=h[5]||F;a=new A(p,T,+F,Q,+z);const K=Array.from(a.elements)[0];!K||(K.closest(".js-diff-table").classList.contains("file-diff-split")?v():k())}r(W,"showHighlight");function te(h,p){const T={starting_diff_position:p.start.side+p.start.lineNumber,ending_diff_position:p.end.side+p.end.lineNumber,line_count:p.lineCount};h.setAttribute("data-hydro-client-context",JSON.stringify(T)),(0,y.Fk)(h)}r(te,"sendHydroEvent"),(0,O.Z)(W),(0,l.N7)(".blob-expanded",W),(0,l.N7)(".js-diff-progressive-loader",function(h){h.addEventListener("load",W)}),(0,l.N7)(".js-diff-entry-loader",function(h){h.addEventListener("load",W)})},58561:(Z,H,d)=>{var f=d(11427);(0,f.on)("click",".js-rich-diff.collapsed .js-expandable",function(E){if(!(E.target instanceof Element))return;E.preventDefault(),E.target.closest(".js-rich-diff").classList.remove("collapsed")}),(0,f.on)("click",".js-show-rich-diff",function(E){const A=E.currentTarget.closest(".js-warn-no-visible-changes");if(!A)return;A.classList.add("d-none");const j=A.parentElement.querySelector(".js-no-rich-changes");j&&j.classList.remove("d-none")})},36805:(Z,H,d)=>{d.d(H,{M:()=>A,T:()=>O});var f=d(46393),E=d(65889);function A(b,R=!1){return O(b)||u(b,R)||x(b)||M(b)}r(A,"hasInteractions");function O(b){for(const R of b.querySelectorAll("input, textarea"))if((R instanceof HTMLInputElement||R instanceof HTMLTextAreaElement)&&j(R))return!0;return!1}r(O,"hasDirtyFields");function j(b){if(b instanceof HTMLInputElement&&(b.type==="checkbox"||b.type==="radio")){if(b.checked!==b.defaultChecked)return!0}else if(b.value!==b.defaultValue)return!0;return!1}r(j,"formFieldValueChanged");let l;async function S(b,R){l=b;try{await R()}finally{l=null}}r(S,"withActiveElement");function y(b){return l instanceof Element?l:b&&b.ownerDocument&&b.ownerDocument.activeElement?b.ownerDocument.activeElement:null}r(y,"getActiveElement");let a;document.addEventListener("mouseup",function(b){a=b.target});function u(b,R){const q=y(b);return q===null||R&&q===b?!1:q===b&&(0,E.sw)(q)||b.contains(q)&&!L(q)?!0:a instanceof Element&&b.contains(a)&&!!a.closest("details[open] > summary")}r(u,"hasFocus");const m="a[href], button";function L(b){var R;if(b instanceof f.Z)return!0;const q=b instanceof HTMLAnchorElement||b instanceof HTMLButtonElement,B=(R=b.parentElement)==null?void 0:R.classList.contains("task-list-item");if(q&&B)return!0;if(!(a instanceof Element))return!1;const w=b.closest(m);if(!w)return!1;const _=a.closest(m);return w===_}r(L,"activeElementIsSafe");function x(b){return b.matches(":active:enabled")}r(x,"hasMousedown");function M(b){return!!(b.closest(".is-dirty")||b.querySelector(".is-dirty"))}r(M,"markedAsDirty")},4463:(Z,H,d)=>{d.d(H,{$S:()=>E,Fk:()=>A,sz:()=>O});var f=d(76343);function E(j,l,S){const y={hydroEventPayload:j,hydroEventHmac:l,visitorPayload:"",visitorHmac:"",hydroClientContext:S},a=document.querySelector("meta[name=visitor-payload]");a instanceof HTMLMetaElement&&(y.visitorPayload=a.content);const u=document.querySelector("meta[name=visitor-hmac]")||"";u instanceof HTMLMetaElement&&(y.visitorHmac=u.content),(0,f.b)(y,!0)}r(E,"sendData");function A(j){const l=j.getAttribute("data-hydro-view")||"",S=j.getAttribute("data-hydro-view-hmac")||"",y=j.getAttribute("data-hydro-client-context")||"";E(l,S,y)}r(A,"trackView");function O(j){const l=j.getAttribute("data-hydro-click-payload")||"",S=j.getAttribute("data-hydro-click-hmac")||"",y=j.getAttribute("data-hydro-client-context")||"";E(l,S,y)}r(O,"sendHydroEvent")},10555:(Z,H,d)=>{d.d(H,{kc:()=>O,lA:()=>j,zT:()=>A});var f=d(67647),E=d(1868);function A(l){const S=l.ownerDocument;setTimeout(()=>{S&&S.defaultView&&(l.scrollIntoView(),S.defaultView.scrollBy(0,-j(S)))},0)}r(A,"scrollIntoView");function O(l){const S=(0,f.Kt)(l);S&&A(S)}r(O,"scrollToFragmentTarget");function j(l){(0,E.H)();const S=l.querySelectorAll(".js-sticky-offset-scroll"),y=l.querySelectorAll(".js-position-sticky"),a=Math.max(0,...Array.from(S).map(L=>{const{top:x,height:M}=L.getBoundingClientRect();return x===0?M:0}))+Math.max(0,...Array.from(y).map(L=>{const{top:x,height:M}=L.getBoundingClientRect(),b=parseInt(getComputedStyle(L).top);if(!L.parentElement)return 0;const R=L.parentElement.getBoundingClientRect().top;return x===b&&R<0?M:0})),u=l.querySelectorAll(".js-position-sticky-stacked"),m=Array.from(u).reduce((L,x)=>{const{height:M,top:b}=x.getBoundingClientRect(),R=b<0,q=x.classList.contains("is-stuck");return L+(!R&&q?M:0)},0);return a+m}r(j,"computeFixedYOffset")},61257:(Z,H,d)=>{d.d(H,{Of:()=>y,WU:()=>l,x0:()=>S});var f=d(36805),E=d(30762),A=d(75914),O=d(84028);const j=new WeakMap,l={};async function S(m){if(j.get(m))return;const L=m.hasAttribute("data-retain-focus"),x=m.getAttribute("data-url");if(!x)throw new Error("could not get url");const M=new AbortController;j.set(m,M);try{const b=await fetch(x,{signal:M.signal,headers:{Accept:"text/html","X-Requested-With":"XMLHttpRequest"}});if(!b.ok)return;const R=await b.text();if((0,f.M)(m,L)){console.warn("Failed to update content with interactions",m);return}return l[x]=R,a(m,R,L)}catch{}finally{j.delete(m)}}r(S,"updateContent");async function y(m,L,x=!1){const M=j.get(m);M==null||M.abort();const b=m.closest(".js-updatable-content[data-url], .js-updatable-content [data-url]");return!x&&b&&b===m&&(l[b.getAttribute("data-url")||""]=L),a(m,L)}r(y,"replaceContent");function a(m,L,x=!1){return(0,O._8)(document,()=>{const M=(0,A.r)(document,L.trim()),b=x&&m.ownerDocument&&m===m.ownerDocument.activeElement?M.querySelector("*"):null,R=Array.from(m.querySelectorAll("details[open][id]")).map(q=>q.id);m.tagName==="DETAILS"&&m.id&&m.hasAttribute("open")&&R.push(m.id);for(const q of m.querySelectorAll(".js-updatable-content-preserve-scroll-position")){const B=q.getAttribute("data-updatable-content-scroll-position-id")||"";u.set(B,q.scrollTop)}for(const q of R){const B=M.querySelector(`#${q}`);B&&B.setAttribute("open","")}m.replaceWith(M),b instanceof HTMLElement&&b.focus()})}r(a,"replace");const u=new Map;(0,E.N7)(".js-updatable-content-preserve-scroll-position",{constructor:HTMLElement,add(m){const L=m.getAttribute("data-updatable-content-scroll-position-id");if(!L)return;const x=u.get(L);x!=null&&(m.scrollTop=x)}})},44088:(Z,H,d)=>{d.d(H,{Z:()=>E});function f(A){return A.offsetWidth<=0&&A.offsetHeight<=0}r(f,"hidden");function E(A){return!f(A)}r(E,"visible")},84028:(Z,H,d)=>{d.d(H,{_8:()=>f,uQ:()=>E});function f(j,l){return E(A(j),l)}r(f,"preserveAnchorNodePosition");function E(j,l){var S=j;if(!S)return Promise.resolve(l());var y=S.ownerDocument.documentElement;function a(L){for(var x=[];L;){var M=L.getBoundingClientRect(),b=M.top,R=M.left;x.push({element:L,top:b,left:R}),L=L.parentElement}return x}r(a,"computeAncestorBoundingRects");function u(L){for(var x=0;x<L.length;x++){var M=L[x];if(y.contains(M.element))return M}}r(u,"firstAttachedBoundingRect");var m=a(S);return Promise.resolve(l()).then(function(L){var x=u(m);if(x){S=x.element;var M=x.top,b=x.left,R=S.getBoundingClientRect(),q=R.top,B=R.left;O(S,B-b,q-M)}return L})}r(E,"preservePosition");function A(j){if(j.activeElement!==j.body)return j.activeElement;var l=j.querySelectorAll(":hover"),S=l.length;if(S)return l[S-1]}r(A,"findAnchorNode");function O(j,l,S){var y=j.ownerDocument,a=y.defaultView;function u(q){return q.offsetParent?{top:q.scrollTop,left:q.scrollLeft}:{top:a.pageYOffset,left:a.pageXOffset}}r(u,"scrollOffsets");function m(q,B,w){if(B===0&&w===0)return[0,0];var _=u(q),$=_.top+w,I=_.left+B;q===y||q===a||q===y.documentElement||q===y.body?y.defaultView.scrollTo(I,$):(q.scrollTop=$,q.scrollLeft=I);var ee=u(q);return[ee.left-_.left,ee.top-_.top]}r(m,"scrollBy");function L(q){var B=q;if(!(!B.offsetParent||B===y.body)){for(;B!==y.body;){if(B.parentElement)B=B.parentElement;else return;var w=a.getComputedStyle(B),_=w.position,$=w.overflowY,I=w.overflowX;if(_==="fixed"||$==="auto"||I==="auto"||$==="scroll"||I==="scroll")break}return B}}r(L,"overflowParent");for(var x=L(j),M=0,b=0;x;){var R=m(x,l-M,S-b);if(M+=R[0],b+=R[1],M===l&&b===S)break;x=L(x)}}r(O,"cumulativeScrollBy")},61075:(Z,H,d)=>{d.d(H,{Z:()=>y});const f=new WeakMap,E=new IntersectionObserver(a=>{for(const u of a)if(u.isIntersecting){const{target:m}=u;if(E.unobserve(m),!(m instanceof y))return;m.loading==="lazy"&&O(m)}},{rootMargin:"0px 0px 256px 0px",threshold:.01});function A(){return new Promise(a=>setTimeout(a,0))}r(A,"task");async function O(a){return E.unobserve(a),j(a).then(function(u){const m=document.createElement("template");m.innerHTML=u;const L=document.importNode(m.content,!0);!a.dispatchEvent(new CustomEvent("include-fragment-replace",{cancelable:!0,detail:{fragment:L}}))||(a.replaceWith(L),a.dispatchEvent(new CustomEvent("include-fragment-replaced")))},function(){a.classList.add("is-error")})}r(O,"handleData");function j(a){const u=a.src;let m=f.get(a);return m&&m.src===u?m.data:(u?m=l(a):m=Promise.reject(new Error("missing src")),f.set(a,{src:u,data:m}),m)}r(j,"getData");function l(a){return A().then(()=>(a.dispatchEvent(new Event("loadstart")),a.fetch(a.request()))).then(u=>{if(u.status!==200)throw new Error(`Failed to load resource: the server responded with a status of ${u.status}`);const m=u.headers.get("Content-Type");if(!S(a.accept)&&(!m||!m.includes(a.accept?a.accept:"text/html")))throw new Error(`Failed to load resource: expected ${a.accept||"text/html"} but was ${m}`);return u.text()}).then(u=>(A().then(()=>{a.dispatchEvent(new Event("load")),a.dispatchEvent(new Event("loadend"))}),u),u=>{throw A().then(()=>{a.dispatchEvent(new Event("error")),a.dispatchEvent(new Event("loadend"))}),u})}r(l,"fetchDataWithEvents");function S(a){return a&&!!a.split(",").find(u=>u.match(/^\s*\*\/\*/))}r(S,"isWildcard");class y extends HTMLElement{static get observedAttributes(){return["src","loading"]}get src(){const u=this.getAttribute("src");if(u){const m=this.ownerDocument.createElement("a");return m.href=u,m.href}else return""}set src(u){this.setAttribute("src",u)}get loading(){return this.getAttribute("loading")==="lazy"?"lazy":"eager"}set loading(u){this.setAttribute("loading",u)}get accept(){return this.getAttribute("accept")||""}set accept(u){this.setAttribute("accept",u)}get data(){return j(this)}attributeChangedCallback(u,m){u==="src"?this.isConnected&&this.loading==="eager"&&O(this):u==="loading"&&this.isConnected&&m!=="eager"&&this.loading==="eager"&&O(this)}constructor(){super();this.attachShadow({mode:"open"}).innerHTML=`
      <style> 
        :host {
          display: block;
        }
      </style>
      <slot></slot>`}connectedCallback(){this.src&&this.loading==="eager"&&O(this),this.loading==="lazy"&&E.observe(this)}request(){const u=this.src;if(!u)throw new Error("missing src");return new Request(u,{method:"GET",credentials:"same-origin",headers:{Accept:this.accept||"text/html"}})}load(){return j(this)}fetch(u){return fetch(u)}}r(y,"IncludeFragmentElement"),window.customElements.get("include-fragment")||(window.IncludeFragmentElement=y,window.customElements.define("include-fragment",y))}},Z=>{var H=r(f=>Z(Z.s=f),"__webpack_exec__");Z.O(0,[762,52,7429,3578,4686,9976],()=>H(21230));var d=Z.O()}]);})();

//# sourceMappingURL=diffs-8889cd466f17.js.map